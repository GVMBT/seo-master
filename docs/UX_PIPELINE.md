# UX Specification: Pipeline

> **ะะตััะธั:** 1.0
> **ะะฐัะฐ:** 2026-02-17
> **ะะฐะทะฝะฐัะตะฝะธะต:** ะะพะปะฝะฐั UX-ัะฟะตัะธัะธะบะฐัะธั Pipeline-ะฒะพัะพะฝะบะธ โ ะพัะฝะพะฒะฝะพะณะพ ัะฟะพัะพะฑะฐ ะฟัะฑะปะธะบะฐัะธะธ ะบะพะฝัะตะฝัะฐ.
> **ะะฐัะฝัะน ะดะพะบัะผะตะฝั:** [UX_TOOLBOX.md](UX_TOOLBOX.md) โ ัะฟัะฐะฒะปะตะฝะธะต ะดะฐะฝะฝัะผะธ (ะฟัะพะตะบัั, ะบะฐัะตะณะพัะธะธ, ะฟะพะดะบะปััะตะฝะธั).

---

## 1. ะะพะฝัะตะฟัะธั

### 1.1. ะัะพะฑะปะตะผะฐ

ะะพะปัะทะพะฒะฐัะตะปั ัะพัะตั ะพะดะฝะพ ะธะท ะดะฒัั:
1. **ยซะะฐะฟะธัะธ ะธ ะพะฟัะฑะปะธะบัะน ััะฐััั ะฝะฐ ะผะพะน ัะฐะนัยป**
2. **ยซะะฐะฟะธัะธ ะธ ะพะฟัะฑะปะธะบัะน ะฟะพัั ะฒ ะผะพะน ะบะฐะฝะฐะป/ะณััะฟะฟัยป**

ะัั ะพััะฐะปัะฝะพะต (ะฟัะพะตะบัั, ะบะฐัะตะณะพัะธะธ, ะฟะพะดะบะปััะตะฝะธั, ะบะปััะตะฒะธะบะธ, ะพะฟะธัะฐะฝะธั, ัะตะฝั) โ **ััะตะดััะฒะฐ**, ะฐ ะฝะต ัะตะปะธ. ะะพะปัะทะพะฒะฐัะตะปั ะฝะต ะดะพะปะถะตะฝ ะทะฝะฐัั ะฐััะธัะตะบัััั โ ะพะฝ ะดะพะปะถะตะฝ ะฟะพะปััะธัั ัะตะทัะปััะฐั.

### 1.2. ะะตัะตะฝะธะต: Goal-Oriented Pipeline

**ะะดะฝะฐ ะบะฝะพะฟะบะฐ ะทะฐะฟััะบะฐะตั ะฒะตัั ะฟะฐะนะฟะปะฐะนะฝ.** ะะพั ัะฐะผ ะฟัะพะฒะตััะตั, ัะตะณะพ ะฝะต ัะฒะฐัะฐะตั (readiness check), ะธ ะฟัะตะดะปะฐะณะฐะตั ะดะพะทะฐะฟะพะปะฝะธัั ะฟะพ ัะพะดั. ะงัะพ ะฝะต ัะพัะตัั โ ะฟัะพะฟััะบะฐะตัั. ะะฑัะทะฐัะตะปัะฝะพะต ัะพะทะดะฐัััั ะฝะฐ ะผะตััะต. ะะตะทัะปััะฐั โ ะฟัะฑะปะธะบะฐัะธั.

### 1.3. ะะฒะฐ ัะตะถะธะผะฐ

| ะะตะถะธะผ | ะะปั ะบะพะณะพ | ะัะพะด | ะงัะพ ะดะฐัั |
|-------|----------|------|----------|
| **Pipeline** | ะัะต ะฟะพะปัะทะพะฒะฐัะตะปะธ | ยซะะฐะฟะธัะฐัั ััะฐัััยป / ยซะะพัั ะฒ ัะพััะตัะธยป | ะัััััะน ะฟััั ะบ ัะตะทัะปััะฐัั, ะฑะพั ะฒะตะดัั |
| **Toolbox** | Power users | ยซะะพะธ ะฟัะพะตะบััยป โ ะบะฐััะพัะบะฐ โ ะธะฝััััะผะตะฝัั | ะะพะปะฝัะน ะบะพะฝััะพะปั ะฝะฐะด ะบะฐะถะดะพะน ะฝะฐัััะพะนะบะพะน |

ะัะฑะปะธะบะฐัะธั ะบะพะฝัะตะฝัะฐ โ **ะขะะะฌะะ ัะตัะตะท Pipeline**. Toolbox โ ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะดะฐะฝะฝัะผะธ.

---

## 2. Dashboard

### 2.1. ะะพะฒัะน ะฟะพะปัะทะพะฒะฐัะตะปั (0 ะฟัะพะตะบัะพะฒ)

```
"ะัะธะฒะตั! ะฏ ะฟะพะผะพะณั ัะพะทะดะฐัั ะธ ะพะฟัะฑะปะธะบะพะฒะฐัั SEO-ะบะพะฝัะตะฝั.
 ะะฐะผ ะฝะฐัะธัะปะตะฝะพ 1500 ัะพะบะตะฝะพะฒ (~5 ััะฐัะตะน ะฝะฐ ัะฐะนั).

 ะงัะพ ัะพัะธัะต ัะดะตะปะฐัั?"

[ะะฐะฟะธัะฐัั ััะฐััั ะฝะฐ ัะฐะนั]        โ PRIMARY
[ะกะพะทะดะฐัั ะฟะพัั ะฒ ัะพััะตัะธ]
โโโโโโโโโโโโโโโโโโโโโโโ
[ะะพะธ ะฟัะพะตะบัั]  [ะัะพัะธะปั]  [ะขะพะบะตะฝั]
```

### 2.2. Returning user (ะตััั ะฟัะพะตะบัั)

```
"ะะฐะปะฐะฝั: 2 450 ัะพะบะตะฝะพะฒ
 ะัะพะตะบัะพะฒ: 3 | ะะบัะธะฒะฝัั ัะฐัะฟะธัะฐะฝะธะน: 5
 ะฅะฒะฐัะธั ะฝะฐ: ~7 ััะฐัะตะน"

[ะะฐะฟะธัะฐัั ััะฐััั ะฝะฐ ัะฐะนั]        โ PRIMARY
[ะกะพะทะดะฐัั ะฟะพัั ะฒ ัะพััะตัะธ]
โโโโโโโโโโโโโโโโโโโโโโโ
[ะะพะธ ะฟัะพะตะบัั]  [ะัะพัะธะปั]  [ะขะพะบะตะฝั]
```

### 2.3. Returning user (0 ะฟัะพะตะบัะพะฒ, ะฑัะป ัะฐะฝะตะต)

```
"ะะฐะปะฐะฝั: 1 500 ัะพะบะตะฝะพะฒ
 ะฃ ะฒะฐั ะฟะพะบะฐ ะฝะตั ะฟัะพะตะบัะพะฒ.
 ะกะพะทะดะฐะนัะต ะฟะตัะฒัะน โ ััะพ ะทะฐะนะผัั 30 ัะตะบัะฝะด."

[ะะฐะฟะธัะฐัั ััะฐััั ะฝะฐ ัะฐะนั]        โ PRIMARY
[ะกะพะทะดะฐัั ะฟะพัั ะฒ ัะพััะตัะธ]
โโโโโโโโโโโโโโโโโโโโโโโ
[ะะพะธ ะฟัะพะตะบัั]  [ะัะพัะธะปั]  [ะขะพะบะตะฝั]
```

### 2.4. ะะพะฝัะตะบััะฝัะน ะฟะพััะดะพะบ CTA

| ะะพะดะบะปััะตะฝะธั | PRIMARY CTA | ะะพะณะธะบะฐ |
|-------------|-------------|--------|
| ะััั WP, ะฝะตั ัะพััะตัะตะน | `[ะะฐะฟะธัะฐัั ััะฐััั]` | ะะดะธะฝััะฒะตะฝะฝัะน ะฟััั ะบ ะฟัะฑะปะธะบะฐัะธะธ |
| ะััั ัะพััะตัะธ, ะฝะตั WP | `[ะะฟัะฑะปะธะบะพะฒะฐัั ะฟะพัั]` | WP ะฝะตั โ ััะฐััั ะฝะตะฒะพะทะผะพะถะฝะฐ ะฑะตะท ะฟัะตะฒัั |
| ะััั ะธ WP, ะธ ัะพััะตัะธ | `[ะะฐะฟะธัะฐัั ััะฐััั]` | ะกัะฐััั โ ะพัะฝะพะฒะฝะพะน ะฟัะพะดัะบั |
| ะะตั ะฟะพะดะบะปััะตะฝะธะน (ะฝะพะฒะธัะพะบ) | `[ะะฐะฟะธัะฐัั ััะฐััั]` | Pipeline ัะฐะผ ะฟัะตะดะปะพะถะธั ะฟะพะดะบะปััะธัั |

### 2.5. ยซะฅะฒะฐัะธั ะฝะฐ: ~N ััะฐัะตะนยป

ะะพะปัะทะพะฒะฐัะตะปั ััะธัะฐะตั ะฒ ััะฐัััั, ะฐ ะฝะต ะฒ ะฝะตะดะตะปัั. ะคะพัะผัะปะฐ: `floor(balance / avg_article_cost)`, ะณะดะต `avg_article_cost = 320` (ะดะตัะพะปั) ะธะปะธ ัะฐัััะธััะฒะฐะตััั ะธะท ะฟะพัะปะตะดะฝะธั 10 ะฟัะฑะปะธะบะฐัะธะน ะฟะพะปัะทะพะฒะฐัะตะปั.

### 2.6. ะะพะทะพะฑะฝะพะฒะปะตะฝะธะต pipeline

ะัะปะธ ะฒ Redis ะตััั ะฐะบัะธะฒะฝัะน checkpoint (`pipeline:{user_id}:state`, TTL 24h), ะฟัะธ ะฒัะพะดะต ะฒ Dashboard:

```
"ะฃ ะฒะฐั ะตััั ะฝะตะทะฐะฒะตัััะฝะฝะฐั ััะฐััั:
 ะัะพะตะบั: ะะตะฑะตะปั ะะพะผัะพัั
 ะััะฐะฝะพะฒะธะปะธัั ะฝะฐ: ะฟะพะดะณะพัะพะฒะบะฐ ะดะฐะฝะฝัั

 [ะัะพะดะพะปะถะธัั] โ SUCCESS    [ะะฐัะฐัั ะทะฐะฝะพะฒะพ]    [ะัะผะตะฝะธัั] โ DANGER"
```

callback_data: `pipeline:resume`, `pipeline:restart`, `pipeline:cancel`

### 2.7. ะัะปะตะฒะพะน/ะพััะธัะฐัะตะปัะฝัะน ะฑะฐะปะฐะฝั

ะะฐะปะฐะฝั 0:

```
"โ๏ธ ะะฐะปะฐะฝั: 0 ัะพะบะตะฝะพะฒ
 ะะปั ะณะตะฝะตัะฐัะธะธ ะบะพะฝัะตะฝัะฐ ะฝัะถะฝะพ ะฟะพะฟะพะปะฝะธัั ะฑะฐะปะฐะฝั.

 [ะะพะฟะพะปะฝะธัั ะฑะฐะปะฐะฝั]          โ PRIMARY
 โโโโโโโโโโโโโโโโโโโโโโโ
 [ะะพะธ ะฟัะพะตะบัั]  [ะัะพัะธะปั]  [ะขะพะบะตะฝั]"
```

ะััะธัะฐัะตะปัะฝัะน ะฑะฐะปะฐะฝั:

```
"โ๏ธ ะะฐะปะฐะฝั: โ50 ัะพะบะตะฝะพะฒ
 ะะฐะดะพะปะถะตะฝะฝะพััั ะฑัะดะตั ัะฟะธัะฐะฝะฐ ะฟัะธ ัะปะตะดัััะตะผ ะฟะพะฟะพะปะฝะตะฝะธะธ.

 [ะะพะฟะพะปะฝะธัั ะฑะฐะปะฐะฝั]          โ PRIMARY
 โโโโโโโโโโโโโโโโโโโโโโโ
 [ะะพะธ ะฟัะพะตะบัั]  [ะัะพัะธะปั]  [ะขะพะบะตะฝั]"
```

ะะฝะพะฟะบะธ `[ะะฐะฟะธัะฐัั ััะฐััั]` ะธ `[ะกะพะทะดะฐัั ะฟะพัั]` ะะ ัะฑะธัะฐัััั -- Pipeline ัะฐะผ ะฟะพะบะฐะถะตั ะพัะธะฑะบั E01 ะฟัะธ ะฝะตะดะพััะฐัะบะต ะฑะฐะปะฐะฝัะฐ.

---

## 3. Reply-ะบะปะฐะฒะธะฐัััะฐ

ะัะตะณะดะฐ ะฒะธะดะฝะฐ ะฒะฝะธะทั ัะบัะฐะฝะฐ:

```
[ะะตะฝั]  [ะะฐะฟะธัะฐัั ััะฐััั]  [ะกะพะทะดะฐัั ะฟะพัั]
[ะะะะะะะ]*  (ัะพะปัะบะพ ะดะปั ADMIN_ID)
```

- `[ะะตะฝั]` โ ะฝะพะฒะพะต dashboard-ัะพะพะฑัะตะฝะธะต
- `[ะะฐะฟะธัะฐัั ััะฐััั]` โ ะทะฐะฟััะบะฐะตั ArticlePipelineFSM
- `[ะกะพะทะดะฐัั ะฟะพัั]` โ ะทะฐะฟััะบะฐะตั SocialPipelineFSM
- `[ะะปะฐะฒะฝะพะต ะผะตะฝั]` (inline) โ editMessageText ะฝะฐ dashboard

---

## 4. Pipeline ยซะะฐะฟะธัะฐัั ััะฐััั ะฝะฐ ัะฐะนัยป

### 4.1. ะะพะปะฝะฐั ััะตะผะฐ (ArticlePipelineFSM โ 23 ัะพััะพัะฝะธั)

```
[ะะฐะฟะธัะฐัั ััะฐััั ะฝะฐ ัะฐะนั]
  โ
  โโ ะจะะ 1: ะัะฑะพั ะฟัะพะตะบัะฐ
  โ   โโโ 0 ะฟัะพะตะบัะพะฒ โ "ะะปั ะฝะฐัะฐะปะฐ ัะพะทะดะฐะดะธะผ ะฟัะพะตะบั โ ััะพ 30 ัะตะบัะฝะด."
  โ   โ    โ ะฒัััะพะตะฝะฝัะน ProjectCreate (4 ะฒะพะฟัะพัะฐ, ัะผ. UX_TOOLBOX ยง2.3) โ ะฐะฒัะพะฒะพะทะฒัะฐั ะฒ pipeline
  โ   โโโ 1 ะฟัะพะตะบั โ ะฐะฒัะพะฒัะฑะพั, ะฟะตัะตัะพะด ะบ ัะฐะณั 2
  โ   โโโ >1 ะฟัะพะตะบั โ "ะกัะฐััั (1/5) โ ะัะพะตะบั
  โ                     ะะปั ะบะฐะบะพะณะพ ะฟัะพะตะบัะฐ?"
  โ        [ะะตะฑะตะปั ะะพะผัะพัั]  [ะกัะพะผะฐัะพะปะพะณะธั]  [ะะฒัะพัะตัะฒะธั]  ...
  โ        (ะฟะฐะณะธะฝะฐัะธั ะฟะพ 8)
  โ
  โ   callback_data: pipeline:article:{project_id}:select
  โ                  page:pipeline_projects:{page_num}
  โ
  โโ ะจะะ 2: WordPress ะฟะพะดะบะปัััะฝ?
  โ   โโโ 1 ะฟะพะดะบะปััะตะฝะธะต โ ะฐะฒัะพะฒัะฑะพั, ะฟะตัะตัะพะด ะบ ัะฐะณั 3
  โ   โโโ >1 ะฟะพะดะบะปััะตะฝะธะน โ "ะกัะฐััั (2/5) โ ะกะฐะนั
  โ   โ    ะะฐ ะบะฐะบะพะน ัะฐะนั?"
  โ   โ    [comfort-mebel.ru]  [blog.comfort.ru]
  โ   โโโ 0 ะฟะพะดะบะปััะตะฝะธะน โ "ะกัะฐััั (2/5) โ ะกะฐะนั
  โ        ะะปั ะฟัะฑะปะธะบะฐัะธะธ ะฝัะถะตะฝ WordPress-ัะฐะนั. ะะพะดะบะปััะธะผ?"
  โ        [ะะพะดะบะปััะธัั WordPress]  โ PRIMARY    [ะขะพะปัะบะพ ะฟัะตะฒัั (ะฑะตะท ะฟัะฑะปะธะบะฐัะธะธ)]
  โ        โ
  โ        โโโ [ะะพะดะบะปััะธัั] โ ะฒัััะพะตะฝะฝัะน ConnectWP (3 ัะฐะณะฐ) โ ะฐะฒัะพะฒะพะทะฒัะฐั
  โ        โโโ [ะขะพะปัะบะพ ะฟัะตะฒัั] โ pipeline ะฟัะพะดะพะปะถะฐะตััั,
  โ             ะฝะฐ ัะฐะณะต ะฟัะฑะปะธะบะฐัะธะธ ะฑัะดะตั ัะพะปัะบะพ Telegraph-ะฟัะตะฒัั
  โ
  โ   callback_data: pipeline:article:{project_id}:wp:{conn_id}
  โ                  pipeline:article:connect_wp
  โ                  pipeline:article:preview_only
  โ
  โโ ะจะะ 3: ะัะฑะพั ะบะฐัะตะณะพัะธะธ (ัะตะผั)
  โ   โโโ 0 ะบะฐัะตะณะพัะธะน โ "ะกัะฐััั (3/5) โ ะขะตะผะฐ
  โ   โ    ะ ััะผ ะฑัะดะตั ััะฐััั? ะะฐะทะพะฒะธัะต ัะตะผั."
  โ   โ    โ ะฒัััะพะตะฝะฝัะน CategoryCreate (1 ะฒะพะฟัะพั, ัะผ. UX_TOOLBOX ยง7.3) โ ะฐะฒัะพะฒะพะทะฒัะฐั
  โ   โโโ 1 ะบะฐัะตะณะพัะธั โ ะฐะฒัะพะฒัะฑะพั, ะฟะตัะตัะพะด ะบ ัะฐะณั 4
  โ   โโโ >1 ะบะฐัะตะณะพัะธะน โ "ะกัะฐััั (3/5) โ ะขะตะผะฐ
  โ        ะะฐะบะฐั ัะตะผะฐ?"
  โ        [ะััะพะฝะฝะฐั ะผะตะฑะตะปั]  [ะจะบะฐัั-ะบัะฟะต]  [ะะธะฒะฐะฝั]  ...
  โ
  โ   callback_data: pipeline:article:{project_id}:cat:{cat_id}
  โ
  โโ ะจะะ 4: Readiness check
  โ   โ
  โ   โ  ะะพั ะฟัะพะฒะตััะตั ัะตะบะปะธัั ะธ ะฟะพะบะฐะทัะฒะฐะตั ะขะะะฌะะ ะฝะตะทะฐะฟะพะปะฝะตะฝะฝัะต ะฟัะฝะบัั.
  โ   โ  ะัะปะธ ะฒัั ะทะฐะฟะพะปะฝะตะฝะพ โ ัะฐะณ ะฟัะพะฟััะบะฐะตััั ัะตะปะธะบะพะผ.
  โ   โ  ะัะต ะฟัะฝะบัั ะฝะฐ ะะะะะ ัะบัะฐะฝะต (ัะตะบะปะธัั).
  โ   โ
  โ   โ  "ะกัะฐััั (4/5) โ ะะพะดะณะพัะพะฒะบะฐ
  โ   โ
  โ   โ   ะะพะถะฝะพ ัะปัััะธัั ััะฐััั:
  โ   โ   โฌ ะะปััะตะฒัะต ััะฐะทั โ SEO-ะพะฟัะธะผะธะทะฐัะธั
  โ   โ   โฌ ะะฟะธัะฐะฝะธะต ะบะพะผะฟะฐะฝะธะธ โ ัะพัะฝะพััั ะบะพะฝัะตะบััะฐ
  โ   โ   โ ะฆะตะฝั โ ะทะฐะฟะพะปะฝะตะฝะพ
  โ   โ   โน๏ธ ะะทะพะฑัะฐะถะตะฝะธั โ 4 AI (ะฐะฒัะพ)
  โ   โ
  โ   โ   [ะะพะดะพะฑัะฐัั ะบะปััะตะฒะธะบะธ (100 ัะพะบ.)]
  โ   โ   [ะะฟะธัะฐะฝะธะต (20 ัะพะบ.)]
  โ   โ   [ะัั ะะ โ ะณะตะฝะตัะธัะพะฒะฐัั โ]      โ SUCCESS
  โ   โ
  โ   โ   ะัะธะตะฝัะธัะพะฒะพัะฝะฐั ััะพะธะผะพััั: ~320 ัะพะบ."
  โ   โ
  โ   โ  ะะพัะปะต ะทะฐะฟะพะปะฝะตะฝะธั ะฟัะฝะบัะฐ โ ะฒะพะทะฒัะฐั ะฝะฐ ัะตะบะปะธัั ั ะพะฑะฝะพะฒะปัะฝะฝัะผะธ ะณะฐะปะพัะบะฐะผะธ:
  โ   โ  "โ ะะพะดะพะฑัะฐะฝะพ 12 ะบะปะฐััะตัะพะฒ (100 ััะฐะท). ะงัะพ ะตัั?"
  โ   โ
  โ   โโโ 4a. ะะปััะตะฒัะต ััะฐะทั
  โ   โ    [ะะพะดะพะฑัะฐัั ะฐะฒัะพะผะฐัะธัะตัะบะธ (100 ััะฐะท โ 100 ัะพะบะตะฝะพะฒ)]
  โ   โ    [ะะฐัััะพะธัั ะฟะฐัะฐะผะตััั]    โ products โ geography โ quantity
  โ   โ    [ะะฐะณััะทะธัั ัะฒะพะธ]         โ KeywordUpload
  โ   โ    [ะะฐะทะฐะด ะบ ัะตะบะปะธััั]
  โ   โ    โ
  โ   โ    โโโ [ะะพะดะพะฑัะฐัั ะฐะฒัะพะผะฐัะธัะตัะบะธ] โ company_name + specialization.
  โ   โ    โ    ะัะปะธ ะฝะตั company_city โ ะพะดะธะฝ ะดะพะฟ. ะฒะพะฟัะพั:
  โ   โ    โ    "ะ ะบะฐะบะพะผ ะณะพัะพะดะต ะฒะฐั ะฑะธะทะฝะตั? (ะดะปั ัะพัะฝัั SEO-ััะฐะท)"
  โ   โ    โ    [ะะพัะบะฒะฐ] [ะกะะฑ] [ะะฒะตััะธ ัะฒะพะน] [ะัั ะะพััะธั]
  โ   โ    โ    ะะพัะพะด ัะพััะฐะฝัะตััั ะฒ ะฟัะพะตะบั.
  โ   โ    โ    โ ะฐะฒัะพะฒะพะทะฒัะฐั ะบ ัะตะบะปะธััั
  โ   โ    โโโ [ะะฐัััะพะธัั] โ inline KeywordGen โ ะฐะฒัะพะฒะพะทะฒัะฐั ะบ ัะตะบะปะธััั
  โ   โ    โโโ [ะะฐะณััะทะธัั] โ inline KeywordUpload โ ะฐะฒัะพะฒะพะทะฒัะฐั ะบ ัะตะบะปะธััั
  โ   โ
  โ   โโโ 4b. ะะฟะธัะฐะฝะธะต ะบะพะผะฟะฐะฝะธะธ/ะบะฐัะตะณะพัะธะธ
  โ   โ    "ะะพะฑะฐะฒะธัั ะพะฟะธัะฐะฝะธะต? AI ะฝะฐะฟะธัะตั ัะพัะฝะตะต ั ะบะพะฝัะตะบััะพะผ ะพ ะฒะฐัะตะน ะบะพะผะฟะฐะฝะธะธ."
  โ   โ    [ะกะณะตะฝะตัะธัะพะฒะฐัั AI (20 ัะพะบะตะฝะพะฒ)]
  โ   โ    [ะะฐะฟะธัะฐัั ะฒัััะฝัั]
  โ   โ    [ะะฐะทะฐะด ะบ ัะตะบะปะธััั]
  โ   โ    โ
  โ   โ    โโโ [ะกะณะตะฝะตัะธัะพะฒะฐัั] โ AI ะณะตะฝะตัะธััะตั โ ะฟะพะบะฐะท โ [ะกะพััะฐะฝะธัั] / [ะะตัะตะณะตะฝะตัะธัะพะฒะฐัั]
  โ   โ    โ    โ "โ ะะฟะธัะฐะฝะธะต ัะพััะฐะฝะตะฝะพ." โ ะฐะฒัะพะฒะพะทะฒัะฐั ะบ ัะตะบะปะธััั
  โ   โ    โโโ [ะัััะฝัั] โ {ะะฒะตะดะธัะต ะพะฟะธัะฐะฝะธะต} โ ัะพััะฐะฝะธัั โ ะฐะฒัะพะฒะพะทะฒัะฐั ะบ ัะตะบะปะธััั
  โ   โ
  โ   โโโ 4c. ะฆะตะฝั
  โ   โ    "ะะพะฑะฐะฒะธัั ะฟัะฐะนั-ะปะธัั? ะ ััะฐััะต ะฑัะดัั ัะตะฐะปัะฝัะต ัะตะฝั ะฒะฐัะธั ัะพะฒะฐัะพะฒ."
  โ   โ    [ะะพะฑะฐะฒะธัั ัะตะบััะพะผ]
  โ   โ    [ะะฐะณััะทะธัั Excel]
  โ   โ    [ะะฐะทะฐะด ะบ ัะตะบะปะธััั]
  โ   โ
  โ   โโโ 4d. ะะทะพะฑัะฐะถะตะฝะธั (ัะพะปัะบะพ AI)
  โ        "ะ ััะฐััะต ะฑัะดะตั 4 AI-ะธะทะพะฑัะฐะถะตะฝะธั ะฟะพ ัะตะผะต."
  โ        [AI ะณะตะฝะตัะฐัะธั (120 ัะพะบะตะฝะพะฒ)]        โ ะดะตัะพะปั
  โ        [ะะฐัััะพะธัั ะบะพะปะธัะตััะฒะพ]               โ ะฒัะฑะพั 0-10
  โ        [ะะฐะทะฐะด ะบ ัะตะบะปะธััั]
  โ
  โ   callback_data: pipeline:readiness:{item}
  โ
  โโ ะจะะ 5: ะะพะดัะฒะตัะถะดะตะฝะธะต
  โ   "ะกัะฐััั (5/5) โ ะะพะดัะฒะตัะถะดะตะฝะธะต
  โ
  โ    ะะตะฑะตะปั ะะพะผัะพัั โ comfort-mebel.ru
  โ    ะขะตะผะฐ: ะััะพะฝะฝะฐั ะผะตะฑะตะปั
  โ    ะะปััะตะฒะธะบะธ: 12 ะบะปะฐััะตัะพะฒ | ะะทะพะฑัะฐะถะตะฝะธั: 4 AI
  โ
  โ    ะกัะพะธะผะพััั: ~320 ัะพะบ. | ะะฐะปะฐะฝั: 2 450"
  โ
  โ   [ะกะพะทะดะฐัั ััะฐััั]        โ SUCCESS
  โ   [ะะตัะฝััััั ะบ ัะตะบะปะธััั]
  โ   [ะัะผะตะฝะฐ]
  โ
  โ   callback_data: pipeline:article:confirm
  โ                  pipeline:article:back_readiness
  โ                  pipeline:article:cancel
  โ
  โโ ะจะะ 6: ะะตะฝะตัะฐัะธั (~60 ัะตะบ)
  โ   "โณ ะกะพะฑะธัะฐั ะดะฐะฝะฝัะต ะธะท Google..."          (0-5ั)
  โ   "โณ ะะฝะฐะปะธะทะธััั ะบะพะฝะบััะตะฝัะพะฒ..."            (5-15ั)
  โ   "โณ ะะตะฝะตัะธััั ัะตะบัั ะธ ะธะทะพะฑัะฐะถะตะฝะธั..."     (15-50ั)
  โ   "โณ ะะพัะพะฒะปั ะฟัะตะดะฟัะพัะผะพัั..."              (50-60ั)
  โ   (ะฟะฐัะฐะปะปะตะปัะฝัะน pipeline: ัะตะบัั + ะธะทะพะฑัะฐะถะตะฝะธั ัะตัะตะท asyncio.gather)
  โ
  โโ ะจะะ 7: ะัะตะฒัั + ะฟัะฑะปะธะบะฐัะธั
  โ   "ะกัะฐััั โ ะัะตะฒัั
  โ    ๐ ยซะััะฝะธ ะฝะฐ ะทะฐะบะฐะท ะฒ ะะพัะบะฒะต: ะบะฐะบ ะฒัะฑัะฐัั ะธ ะฝะต ะฟะตัะตะฟะปะฐัะธััยป
  โ    ๐ 2 150 ัะปะพะฒ, 4 ะบะฐััะธะฝะบะธ, 6 ะทะฐะณะพะปะพะฒะบะพะฒ
  โ    ๐ ะะปะฐััะตั: ะััะฝะธ ะฝะฐ ะทะฐะบะฐะท (15 ััะฐะท)
  โ    ๐ฐ 320 ัะพะบะตะฝะพะฒ
  โ    ๐ telegra.ph/Kuhni-na-zakaz-123
  โ    โน๏ธ ะัะตะฒัั ะฟัะธะฑะปะธะทะธัะตะปัะฝะพะต. ะะฐ ัะฐะนัะต ััะฐััั
  โ       ะฑัะดะตั ะฒัะณะปัะดะตัั ะฒ ััะธะปะต ะฒะฐัะตะน WP-ัะตะผั."
  โ
  โ   ะะธะผะธั ะฟะตัะตะณะตะฝะตัะฐัะธะน (FSM_SPEC ยง2.2):
  โ   2 ะฑะตัะฟะปะฐัะฝัั, ะดะฐะปะตะต ะฟะปะฐัะฝะพ (~320 ัะพะบ.).
  โ   ะกััััะธะบ ะฒ state.data["regen_count"].
  โ
  โ   ะะฐัะธะฐะฝั A (ะตััั WP):
  โ   [ะะฟัะฑะปะธะบะพะฒะฐัั]          โ SUCCESS
  โ   [ะะตัะตะณะตะฝะตัะธัะพะฒะฐัั]      (ะธะปะธ [ะะตัะตะณะตะฝะตัะธัะพะฒะฐัั (~320 ัะพะบ.)] ะตัะปะธ regen_count >= 2)
  โ   [ะัะผะตะฝะฐ โ ะฒะตัะฝััั ัะพะบะตะฝั] โ DANGER
  โ
  โ   ะะฐัะธะฐะฝั B (ัะพะปัะบะพ ะฟัะตะฒัั, ะฝะตั WP):
  โ   [ะะพะดะบะปััะธัั WordPress ะธ ะพะฟัะฑะปะธะบะพะฒะฐัั] โ SUCCESS
  โ   [ะกะบะพะฟะธัะพะฒะฐัั HTML]
  โ   [ะะตัะตะณะตะฝะตัะธัะพะฒะฐัั]
  โ   [ะัะผะตะฝะฐ โ ะฒะตัะฝััั ัะพะบะตะฝั] โ DANGER
  โ
  โ   callback_data: pipeline:article:publish
  โ                  pipeline:article:regen
  โ                  pipeline:article:cancel_refund
  โ
  โโ ะจะะ 8: ะะตะทัะปััะฐั + next actions
      "โ ะะฟัะฑะปะธะบะพะฒะฐะฝะพ!
       https://comfort-mebel.ru/kuhni-na-zakaz/
       ะกะฟะธัะฐะฝะพ: 320 ัะพะบะตะฝะพะฒ | ะััะฐัะพะบ: 2 130"

      [ะัั ััะฐััั]                    โ PRIMARY โ pipeline ั ัะฐะณะฐ 3
      [ะะฐัััะพะธัั ะฐะฒัะพะฟัะฑะปะธะบะฐัะธั]      โ ScheduleSetup inline
      [ะะปะฐะฒะฝะพะต ะผะตะฝั]

      callback_data: pipeline:article:more
                     pipeline:article:schedule
                     nav:dashboard
```

### 4.2. ะะพะฒะตะดะตะฝะธะต ยซะัั ััะฐัััยป

Pipeline ะทะฐะฟะพะผะธะฝะฐะตั ะฟัะพะตะบั ะธ ัะฐะนั. ะะพะฒัะพัะฝัะน ะทะฐะฟััะบ ะฟะพะบะฐะทัะฒะฐะตั ะบะพะฝัะตะบัั:

```
[ะัั ััะฐััั]
  โ "ะกัะฐััั (3/5) โ ะะตะฑะตะปั ะะพะผัะพัั (comfort-mebel.ru)
     ะะฐะบะฐั ัะตะผะฐ?"
     [ะััะพะฝะฝะฐั ะผะตะฑะตะปั]  [ะจะบะฐัั-ะบัะฟะต]  [ะะธะฒะฐะฝั]
     [ะััะณะพะน ะฟัะพะตะบั]

  โโโ ะะฐัะตะณะพัะธะน >1 โ ัะฟะธัะพะบ (ะบะฐะบ ะฒััะต)
  โโโ ะะฐัะตะณะพัะธั 1 โ ะฐะฒัะพะฒัะฑะพั
  โโโ ะัั ะทะฐะฟะพะปะฝะตะฝะพ โ ััะฐะทั ะฟะพะดัะฒะตัะถะดะตะฝะธะต (ัะฐะณ 5)
```

**ะะปั returning user ั ะฝะฐัััะพะตะฝะฝัะผ ะฟัะพะตะบัะพะผ: 2-3 ะฝะฐะถะฐัะธั ะดะพ ะณะตะฝะตัะฐัะธะธ.**

### 4.3. Inline handlers (ะฝะต FSM delegation)

Pipeline **ัะฐะผ ัะพะดะตัะถะธั** states ะดะปั ะบะฐะถะดะพะณะพ sub-flow โ ััะพ ะะ ะฒัะทะพะฒ ััะถะพะณะพ FSM, ะฐ inline ะฒะพะฟัะพัั ะฒะฝัััะธ PipelineFSM. ะะพั **ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฒะพะทะฒัะฐัะฐะตั ะฒ pipeline** ะฟะพัะปะต ะทะฐะฟะพะปะฝะตะฝะธั.

```
ArticlePipelineFSM
  โโโ state: select_project
  โโโ state: create_project_*        # inline: 4 ะฒะพะฟัะพัะฐ โ ProjectRepository
  โโโ state: check_wp / select_wp
  โโโ state: connect_wp_*            # inline: 3 ะฒะพะฟัะพัะฐ โ ConnectionService
  โโโ state: select_category
  โโโ state: create_category         # inline: 1 ะฒะพะฟัะพั โ CategoryRepository
  โโโ state: readiness               # ัะตะบะปะธัั โ ะพะดะธะฝ ัะบัะฐะฝ
  โโโ state: readiness_keywords_*    # inline: 3 ะฒะพะฟัะพัะฐ โ KeywordService
  โโโ state: readiness_description   # inline: 1 confirm โ AIOrchestrator
  โโโ state: readiness_prices        # inline: text/excel โ CategoryRepository
  โโโ state: readiness_photos        # inline: AI choice
  โโโ state: confirmation
  โโโ state: generating
  โโโ state: preview
  โโโ state: published
```

### 4.4. Progressive Readiness (ะฐะดะฐะฟัะธะฒะฝัะน ัะตะบะปะธัั)

Readiness check (ัะฐะณ 4) ะฐะดะฐะฟัะธััะตััั ะบ ะพะฟััั ะฟะพะปัะทะพะฒะฐัะตะปั **ะณะปะพะฑะฐะปัะฝะพ** (ะฝะต per-project):

| ะฃัะปะพะฒะธะต | ะะพะบะฐะทัะฒะฐะตะผัะต ะฟัะฝะบัั (ะตัะปะธ ะฝะต ะทะฐะฟะพะปะฝะตะฝั) | ะะฑัะทะฐัะตะปัะฝัะต |
|---------|----------------------------------------|--------------|
| **ะะตัะฒัะน ะทะฐะฟััะบ** (0 ะฟัะฑะปะธะบะฐัะธะน) | ะะปััะตะฒะธะบะธ + ะพะฟะธัะฐะฝะธะต | ะะปััะตะฒะธะบะธ |
| **2-5 ะฟัะฑะปะธะบะฐัะธะน** | ะะปััะตะฒะธะบะธ + ะพะฟะธัะฐะฝะธะต + ัะตะฝั + ะธะทะพะฑัะฐะถะตะฝะธั | ะะปััะตะฒะธะบะธ |
| **>5 ะฟัะฑะปะธะบะฐัะธะน** | ะัะต ะฟัะฝะบัั | ะะปััะตะฒะธะบะธ |
| **ะัั ัะถะต ะทะฐะฟะพะปะฝะตะฝะพ** | ะจะฐะณ ะฟัะพะฟััะบะฐะตััั ัะตะปะธะบะพะผ | โ |

**ะะปััะตะฒัะต ััะฐะทั** โ ะตะดะธะฝััะฒะตะฝะฝัะน ะฑะปะพะบะธััััะธะน ะฟัะฝะบั. ะะฟะธัะฐะฝะธะต, ัะตะฝั, ะธะทะพะฑัะฐะถะตะฝะธั โ ะพะฟัะธะพะฝะฐะปัะฝัะต enrichers.

### 4.5. Quick confirm โ ยซะะฐะบ ะฒ ะฟัะพัะปัะน ัะฐะทยป

ะัะธ ัััะฝะพะผ ะทะฐะฟััะบะต ะฟะพัะปะต ะฝะฐัััะพะนะบะธ ัะฐัะฟะธัะฐะฝะธั:

```
"ะกัะฐััั (5/5) โ ะะตะฑะตะปั ะะพะผัะพัั โ comfort-mebel.ru
 ะะพัะปะตะดะฝัั ัะตะผะฐ: ะััะพะฝะฝะฐั ะผะตะฑะตะปั

 [ะขะฐ ะถะต ัะตะผะฐ โ ะณะตะฝะตัะธัะพะฒะฐัั]     โ SUCCESS โ 1 ะบะปะธะบ ะดะพ ะณะตะฝะตัะฐัะธะธ
 [ะััะณะฐั ัะตะผะฐ]                    โ ัะฟะธัะพะบ ะบะฐัะตะณะพัะธะน
 [ะััะณะพะน ะฟัะพะตะบั]"
```

ะัะฝะพะฒะฐะฝะพ ะฝะฐ `publication_logs ORDER BY created_at DESC LIMIT 1`.

---

## 5. Pipeline ยซะะฟัะฑะปะธะบะพะฒะฐัั ะฟะพัั ะฒ ัะพััะตัะธยป

### 5.1. ะะพะปะฝะฐั ััะตะผะฐ (SocialPipelineFSM โ 27 ัะพััะพัะฝะธะน)

```
[ะะฟัะฑะปะธะบะพะฒะฐัั ะฟะพัั ะฒ ัะพััะตัะธ]
  โ
  โโ ะจะะ 1: ะัะฑะพั ะฟัะพะตะบัะฐ
  โ   (ะฐะฝะฐะปะพะณะธัะฝะพ ััะฐััะต: 0โัะพะทะดะฐัั, 1โะฐะฒัะพ, >1โัะฟะธัะพะบ)
  โ
  โโ ะจะะ 2: ะัะฑะพั ะฟะพะดะบะปััะตะฝะธั (ะฟะปะฐััะพัะผะฐ + ะบะฐะฝะฐะป ะฒ ะพะดะฝะพะผ ัะฐะณะต)
  โ   โ
  โ   โ  ะะพะบะฐะทัะฒะฐัััั ะบะพะฝะบัะตัะฝัะต ะฟะพะดะบะปััะตะฝะธั, ะฐ ะฝะต ะฟะปะฐััะพัะผั.
  โ   โ
  โ   โโโ ะััั ะฟะพะดะบะปััะตะฝะธั โ "ะะพัั (2/5) โ ะะปะฐััะพัะผะฐ"
  โ   โ    [Telegram: @comfort_channel]
  โ   โ    [VK: ะะตะฑะตะปั ะะพะผัะพัั (ะณััะฟะฟะฐ)]
  โ   โ    [Pinterest: ะะตะฑะตะปัะฝัะต ะธะดะตะธ (ะดะพัะบะฐ: ะะฝัะตััะตัั)]
  โ   โโโ 1 ะฟะพะดะบะปััะตะฝะธะต โ ะฐะฒัะพะฒัะฑะพั
  โ   โโโ 0 ะฟะพะดะบะปััะตะฝะธะน โ "ะะพะดะบะปััะธัะต ัะพััะตัั ะดะปั ะฟัะฑะปะธะบะฐัะธะธ"
  โ        [ะะพะดะบะปััะธัั Telegram]
  โ        [ะะพะดะบะปััะธัั VK]
  โ        [ะะพะดะบะปััะธัั Pinterest]
  โ        โ ะฒัััะพะตะฝะฝัะน Connect* FSM โ ะฐะฒัะพะฒะพะทะฒัะฐั
  โ
  โ   callback_data: pipeline:social:{project_id}:conn:{conn_id}
  โ
  โโ ะจะะ 3: ะัะฑะพั ะบะฐัะตะณะพัะธะธ (ัะตะผั)
  โ   (ะฐะฝะฐะปะพะณะธัะฝะพ ััะฐััะต: 0โัะพะทะดะฐัั, 1โะฐะฒัะพ, >1โัะฟะธัะพะบ)
  โ
  โโ ะจะะ 4: Readiness check (ัะพะบัะฐััะฝะฝัะน)
  โ   โ  ะะปั ัะพัะฟะพััะพะฒ: ะบะปััะตะฒัะต ััะฐะทั ะธ ะพะฟะธัะฐะฝะธะต.
  โ   โ  ะฆะตะฝั, ะธะทะพะฑัะฐะถะตะฝะธั โ ะะ ัะฟัะฐัะธะฒะฐัั.
  โ   โ  ะัะปะธ ะพะฑะฐ ะทะฐะฟะพะปะฝะตะฝั โ ัะฐะณ ะฟัะพะฟััะบะฐะตััั.
  โ   โ
  โ   โ  "ะะพัั (4/5) โ ะะพะดะณะพัะพะฒะบะฐ
  โ   โ   โฌ ะะปััะตะฒัะต ััะฐะทั โ ัะตะปะตะฒะฐะฝัะฝัะต ัะตััะตะณะธ
  โ   โ   โ ะะฟะธัะฐะฝะธะต โ ะทะฐะฟะพะปะฝะตะฝะพ
  โ   โ   [ะะพะดะพะฑัะฐัั ะบะปััะตะฒะธะบะธ (50 ัะพะบ.)]
  โ   โ   [ะัั ะะ โ ะณะตะฝะตัะธัะพะฒะฐัั โ]"      โ SUCCESS
  โ
  โโ ะจะะ 5: ะะพะดัะฒะตัะถะดะตะฝะธะต
  โ   "ะะพัั (5/5) โ ะะพะดัะฒะตัะถะดะตะฝะธะต
  โ
  โ    Telegram: @comfort_channel
  โ    ะขะตะผะฐ: ะััะพะฝะฝะฐั ะผะตะฑะตะปั
  โ    ะกัะพะธะผะพััั: ~40 ัะพะบ. | ะะฐะปะฐะฝั: 2 450"
  โ
  โ   [ะกะพะทะดะฐัั ะฟะพัั] โ SUCCESS    [ะะตัะฝััััั ะบ ัะตะบะปะธััั]    [ะัะผะตะฝะฐ]
  โ
  โ   callback_data: pipeline:social:confirm
  โ
  โโ ะจะะ 6: ะะตะฝะตัะฐัะธั โ ัะตะฒัั
  โ   "ะะพัั โ ะะตะฒัั
  โ    ๐ฑ ะะพัั ะดะปั Telegram:
  โ    โโโโโโโโโโโโโ
  โ    [ัะตะบัั ะฟะพััะฐ ะฒ ัะฐัะต]
  โ    โโโโโโโโโโโโโ
  โ    + 1 ะธะทะพะฑัะฐะถะตะฝะธะต"
  โ
  โ   [ะะฟัะฑะปะธะบะพะฒะฐัั] โ SUCCESS    [ะะตัะตะณะตะฝะตัะธัะพะฒะฐัั]*    [ะัะผะตะฝะฐ] โ DANGER
  โ   * 2 ะฑะตัะฟะปะฐัะฝัั ะฟะตัะตะณะตะฝะตัะฐัะธะธ, ะดะฐะปะตะต ะฟะปะฐัะฝะพ (~40 ัะพะบ.).
  โ
  โ   callback_data: pipeline:social:publish
  โ                  pipeline:social:regen
  โ                  pipeline:social:cancel_refund
  โ
  โโ ะจะะ 7: ะะตะทัะปััะฐั + next actions
      "โ ะะพัั ะพะฟัะฑะปะธะบะพะฒะฐะฝ ะฒ @comfort_channel!
       ะกะฟะธัะฐะฝะพ: 40 ัะพะบะตะฝะพะฒ | ะััะฐัะพะบ: 2 410"

      [ะะดะฐะฟัะธัะพะฒะฐัั ะดะปั VK (~10 ัะพะบ.)]       โ ะตัะปะธ ะตััั VK
      [ะะดะฐะฟัะธัะพะฒะฐัั ะดะปั Pinterest (~10 ัะพะบ.)] โ ะตัะปะธ ะตััั Pinterest
      [ะัั ะฟะพัั]                                โ PRIMARY
      [ะะฐัััะพะธัั ะฐะฒัะพะฟัะฑะปะธะบะฐัะธั]
      [ะะปะฐะฒะฝะพะต ะผะตะฝั]

      ะะฝะพะฟะบะธ ะบัะพัั-ะฟะพััะธะฝะณะฐ ะฟะพะบะฐะทัะฒะฐัััั ะดะปั ะะกะะฅ ะพััะฐะฒัะธััั
      ะฟะพะดะบะปัััะฝะฝัั ะฟะปะฐััะพัะผ.

      callback_data: pipeline:crosspost:{conn_id}
                     pipeline:social:more
                     pipeline:social:schedule
                     nav:dashboard
```

---

## 6. ะัะพัั-ะฟะพััะธะฝะณ

ะะพัะปะต ะฟัะฑะปะธะบะฐัะธะธ ะฟะพััะฐ ะฟัะตะดะปะฐะณะฐะตััั ะฐะดะฐะฟัะฐัะธั ะดะปั ะดััะณะธั ะฟะพะดะบะปัััะฝะฝัั ะฟะปะฐััะพัะผ. ะะดะฐะฟัะฐัะธั ัะตะบััะฐ (ะดะปะธะฝะฐ, ัะตััะตะณะธ, ัะพัะผะฐัะธัะพะฒะฐะฝะธะต) ะฑะตะท ะฟะพะฒัะพัะฝะพะน ะณะตะฝะตัะฐัะธะธ ั ะฝัะปั.

### 6.1. ะกัะพะธะผะพััั

- ะัะพัั-ะฟะพัั: `ceil(adapted_word_count / 100) * 10` (~10 ัะพะบะตะฝะพะฒ ะดะปั ะฟะพััะฐ ~100 ัะปะพะฒ)
- ะะทะพะฑัะฐะถะตะฝะธะต: ะฟะตัะตะธัะฟะพะปัะทัะตััั ะธะท ะพัะธะณะธะฝะฐะปัะฝะพะณะพ ะฟะพััะฐ (0 ัะพะบะตะฝะพะฒ)
- `token_expenses.operation_type`: `cross_post`
- MODEL_CHAINS: `task_type: "cross_post"` (DeepSeek, ะดะตััะฒะฐั ััะฐะฝััะพัะผะฐัะธั)

### 6.2. ะะฑัะทะฐัะตะปัะฝัะน ัะตะฒัั

ะะดะฐะฟัะธัะพะฒะฐะฝะฝัะน ะฟะพัั **ะฒัะตะณะดะฐ ะฟัะพัะพะดะธั ัะตะฒัั** ะฟะตัะตะด ะฟัะฑะปะธะบะฐัะธะตะน:

```
[ะะดะฐะฟัะธัะพะฒะฐัั ะดะปั VK (~10 ัะพะบ.)]
  โ "ะะพัั ะฐะดะฐะฟัะธัะพะฒะฐะฝ ะดะปั VK:
     โโโโโโโโโโโโโ
     [ัะตะบัั ะฟะพััะฐ]
     โโโโโโโโโโโโโ

     [ะะฟัะฑะปะธะบะพะฒะฐัั ะฒ VK] โ SUCCESS    [ะัะผะตะฝะฐ]"
```

callback_data: `pipeline:crosspost:{conn_id}:publish`

---

## 7. ะะฒัะพะฟัะฑะปะธะบะฐัะธั ะฒ ะบะพะฝัะตะบััะต Pipeline

### 7.1. ะัะตะดะปะพะถะตะฝะธะต ัะฐัะฟะธัะฐะฝะธั ะฟะพัะปะต ะฟะตัะฒะพะน ะฟัะฑะปะธะบะฐัะธะธ

```
ะจะฐะณ 8 (ะฟะพัะปะต ะฟัะฑะปะธะบะฐัะธะธ):
  "โ ะกัะฐััั ะพะฟัะฑะปะธะบะพะฒะฐะฝะฐ!

   ะฅะพัะธัะต ะฐะฒัะพะผะฐัะธัะตัะบะธะต ะฟัะฑะปะธะบะฐัะธะธ ะฟะพ ัะฐัะฟะธัะฐะฝะธั?
   ะะพั ะฑัะดะตั ัะฐะผ ะณะตะฝะตัะธัะพะฒะฐัั ะธ ะฟัะฑะปะธะบะพะฒะฐัั ััะฐััะธ.

   [ะะฐะถะดัะน ะฑัะดะฝะธะน ะดะตะฝั ะฒ 10:00]     โ quick preset
   [ะะฝ, ะกั, ะั ะฒ 10:00]            โ quick preset
   [ะะฐัััะพะธัั ะฒัััะฝัั]              โ ะฟะพะปะฝัะน ScheduleSetup FSM
   [ะะพะทะถะต]"
```

Quick presets ัะพะทะดะฐัั ัะฐัะฟะธัะฐะฝะธะต ะฒ 1 ะบะปะธะบ. ะะพะบะฐะทัะฒะฐะตััั ะผัะณะบะพ, ะฑะตะท ะฝะฐะฒัะทัะฒะฐะฝะธั. ะัะปะธ `[ะะพะทะถะต]` โ ะฝะต ะฟะพะฒัะพัััั ะดะพ 5-ะน ะฟัะฑะปะธะบะฐัะธะธ.

### 7.2. ะะฒัะพะฟัะฑะปะธะบะฐัะธั ะฑะตะท ััะฐััะธั ัะทะตัะฐ

ะะฒัะพะฟัะฑะปะธะบะฐัะธั ะฟะพ ัะฐัะฟะธัะฐะฝะธั ัะฐะฑะพัะฐะตั **ะฑะตะท pipeline** โ QStash cron ะผะตัะฐะฝะธะทะผ:
- QStash โ webhook โ ะณะตะฝะตัะฐัะธั โ ะฟัะฑะปะธะบะฐัะธั โ ัะฒะตะดะพะผะปะตะฝะธะต
- Telegraph-ะฟัะตะฒัั ะฝะต ัะพะทะดะฐัััั
- ะัะธ ะพัะธะฑะบะต: ะฒะพะทะฒัะฐั ัะพะบะตะฝะพะฒ + ัะฒะตะดะพะผะปะตะฝะธะต ั ะฟัะธัะธะฝะพะน

---

## 8. ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ ะฒ Pipeline

### 8.1. ะะตะดะพััะฐัะพัะฝะพ ัะพะบะตะฝะพะฒ

```
"โ๏ธ ะะตะดะพััะฐัะพัะฝะพ ัะพะบะตะฝะพะฒ!
 ะัะถะฝะพ: ~320 | ะะฐะปะฐะฝั: 50

 [ะะพะฟะพะปะฝะธัั ะฑะฐะปะฐะฝั] โ PRIMARY  โ ัะบัะฐะฝ ะขะพะบะตะฝั โ ะฟะพัะปะต ะพะฟะปะฐัั โ ะฐะฒัะพะฒะพะทะฒัะฐั
 [ะัะผะตะฝะฐ]"
```

Pipeline state ัะพััะฐะฝัะตััั. ะะพัะปะต ะฟะพะฟะพะปะฝะตะฝะธั: ยซะะฐะปะฐะฝั ะฟะพะฟะพะปะฝะตะฝ! ะัะพะดะพะปะถะธัั ะณะตะฝะตัะฐัะธั?ยป `[ะัะพะดะพะปะถะธัั]` `[ะัะผะตะฝะฐ]`

### 8.2. WordPress ะฝะต ะพัะฒะตัะฐะตั

```
"โ๏ธ ะะต ัะดะฐะปะพัั ะฟะพะดะบะปััะธัััั ะบ comfort-mebel.ru
 ะะพะทะผะพะถะฝัะต ะฟัะธัะธะฝั: ัะฐะนั ะฝะตะดะพัััะฟะตะฝ, Application Password ะธัััะบ.

 [ะะพะฒัะพัะธัั ะฟะพะฟััะบั]   โ PRIMARY
 [ะััะณะพะน ัะฐะนั]         โ ะฒัะฑะพั ะธะท ะฟะพะดะบะปัััะฝะฝัั
 [ะขะพะปัะบะพ ะฟัะตะฒัั]       โ ะณะตะฝะตัะฐัะธั ะฑะตะท ะฟัะฑะปะธะบะฐัะธะธ
 [ะัะผะตะฝะฐ]"
```

### 8.3. ะะตะฝะตัะฐัะธั ะฝะต ัะดะฐะปะฐัั

```
"โ๏ธ ะัะธะฑะบะฐ ะณะตะฝะตัะฐัะธะธ ัะตะบััะฐ.
 ะขะพะบะตะฝั ะฒะพะทะฒัะฐัะตะฝั: 200

 [ะะพะฒัะพัะธัั]           โ PRIMARY โ ะทะฐะฝะพะฒะพ ั ัะพะณะพ ะถะต ัะฐะณะฐ
 [ะััะณะฐั ัะตะผะฐ]         โ ัะฐะณ 3 (ะฒัะฑะพั ะบะฐัะตะณะพัะธะธ)
 [ะะปะฐะฒะฝะพะต ะผะตะฝั]"
```

### 8.4. FSM ะบะพะฝัะปะธะบั

ะัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ะดััะณะพะผ FSM ะธ ะฝะฐะถะธะผะฐะตั ยซะะฐะฟะธัะฐัั ััะฐัััยป:
- ะขะตะบััะธะน FSM ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะฑัะฐััะฒะฐะตััั (E29)
- Pipeline FSM ััะฐัััะตั

### 8.5. ะะฐัะธัะฐ ะพั ัะปััะฐะนะฝะพะณะพ ะฒััะพะดะฐ

ะัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั `[ะะตะฝั]` ะฒะพ ะฒัะตะผั pipeline:

**ะจะฐะณะธ 1-3** (ะฒัะฑะพั ะฟัะพะตะบัะฐ/WP/ะบะฐัะตะณะพัะธะธ): ะฒััะพะด ะฑะตะท ะฟะพะดัะฒะตัะถะดะตะฝะธั.

**ะจะฐะณะธ 4-7** (readiness โ ะณะตะฝะตัะฐัะธั โ ะฟัะตะฒัั): ะฟะพะดัะฒะตัะถะดะตะฝะธะต:

```
"ะั ะฒ ะฟัะพัะตััะต ัะพะทะดะฐะฝะธั ััะฐััะธ (ะฟะพะดะณะพัะพะฒะบะฐ ะดะฐะฝะฝัั).
 ะัะตัะฒะฐัั? ะัะพะณัะตัั ะฑัะดะตั ัะพััะฐะฝัะฝ 24 ัะฐัะฐ."

[ะัะพะดะพะปะถะธัั pipeline]   โ PRIMARY
[ะัะนัะธ ะฒ ะผะตะฝั]          โ DANGER
```

### 8.6. ะขะฐะนะผะฐัั pipeline

Pipeline state ะฒ Redis ั TTL 24h. ะงะตัะตะท 2 ัะฐัะฐ โ state ัะพััะฐะฝัะฝ. ะะพัะปะต 24h โ ะพัะธัะตะฝ, ะฝะฐัะฐัั ะทะฐะฝะพะฒะพ.

### 8.7. ะะฝะพะถะตััะฒะตะฝะฝัะต pipeline

ะะดะธะฝ FSM state per user โ ะพะดะฝะพะฒัะตะผะตะฝะฝะพ ะดะฒะฐ pipeline ะะ ะฟะพะดะดะตัะถะธะฒะฐัััั.

```
"ะฃ ะฒะฐั ะฐะบัะธะฒะตะฝ pipeline:
 ะกัะฐััั ะดะปั ะะตะฑะตะปั ะะพะผัะพัั (ะฟะพะดะณะพัะพะฒะบะฐ ะดะฐะฝะฝัั)

 [ะัะตัะฒะฐัั ะธ ะฝะฐัะฐัั ะฝะพะฒัะน] โ DANGER    [ะะตัะฝััััั ะบ ัะตะบััะตะผั] โ PRIMARY"
```

Checkpoint ะฟะตัะฒะพะณะพ pipeline ัะพััะฐะฝัะตััั 24h ะดะปั ะฒะพะทะฒัะฐัะฐ.

### 8.8. ะะพะทะฒัะฐั ะธะท YooKassa-ะพะฟะปะฐัั

Webhook handler ะฟัะพะฒะตััะตั `pipeline:{user_id}:state` ะฒ Redis:

```
"ะะฐะปะฐะฝั ะฟะพะฟะพะปะฝะตะฝ! ะัะพะดะพะปะถะธัั ัะพะทะดะฐะฝะธะต ััะฐััะธ?
 ะัะพะตะบั: ะะตะฑะตะปั ะะพะผัะพัั | ะขะตะผะฐ: ะััะพะฝะฝะฐั ะผะตะฑะตะปั

 [ะัะพะดะพะปะถะธัั] โ SUCCESS    [ะะตั]"
```

### 8.9. ะัะธะฑะบะธ Social Pipeline

ะัะธะฑะบะธ Article Pipeline (ยง8.1-8.3) ะฟะพะบััะฒะฐัั ะพะฑัะธะต ัะปััะฐะธ (ะฑะฐะปะฐะฝั, ะณะตะฝะตัะฐัะธั). ะะธะถะต โ ัะฟะตัะธัะธัะฝัะต ะดะปั ัะพััะตัะตะน.

#### Telegram: ะฑะพั ะฝะต ะฐะดะผะธะฝ ะบะฐะฝะฐะปะฐ

```
"โ๏ธ ะะพั ะฝะต ัะฒะปัะตััั ะฐะดะผะธะฝะธัััะฐัะพัะพะผ @comfort_channel.
 ะะพะฑะฐะฒััะต ะฑะพัะฐ ะฐะดะผะธะฝะพะผ ั ะฟัะฐะฒะพะผ ยซะัะฑะปะธะบะฐัะธั ัะพะพะฑัะตะฝะธะนยป.

 [ะัะพะฒะตัะธัั ัะฝะพะฒะฐ]       โ PRIMARY
 [ะััะณะพะน ะบะฐะฝะฐะป]          โ ัะฟะธัะพะบ ะฟะพะดะบะปััะตะฝะธะน
 [ะัะผะตะฝะฐ]"
```

#### VK: ะพัะธะฑะบะฐ API

```
"โ๏ธ ะัะธะฑะบะฐ VK API: {ะพะฟะธัะฐะฝะธะต ะพัะธะฑะบะธ}
 ะะพะทะผะพะถะฝะพ, ัะพะบะตะฝ ะธัััะบ ะธะปะธ ะณััะฟะฟะฐ ะทะฐะฑะปะพะบะธัะพะฒะฐะฝะฐ.

 [ะะพะฒัะพัะธัั]             โ PRIMARY
 [ะะตัะตะฟะพะดะบะปััะธัั VK]     โ ConnectVKFSM
 [ะััะณะพะต ะฟะพะดะบะปััะตะฝะธะต]    โ ัะฟะธัะพะบ ะฟะพะดะบะปััะตะฝะธะน
 [ะัะผะตะฝะฐ]"
```

#### Pinterest: rate limit / ะพัะธะฑะบะฐ

```
"โ๏ธ Pinterest ะพะณัะฐะฝะธัะธะป ะทะฐะฟัะพัั. ะะพะฟัะพะฑัะนัะต ัะตัะตะท 15 ะผะธะฝัั.

 [ะะพะฒัะพัะธัั ัะตัะตะท 15 ะผะธะฝ]   โ PRIMARY
 [ะััะณะพะต ะฟะพะดะบะปััะตะฝะธะต]       โ ัะฟะธัะพะบ ะฟะพะดะบะปััะตะฝะธะน
 [ะัะผะตะฝะฐ]"
```

#### ะัะฑะปะธะบะฐัะธั ะฝะต ัะดะฐะปะฐัั (ะปัะฑะฐั ะฟะปะฐััะพัะผะฐ)

```
"โ๏ธ ะะต ัะดะฐะปะพัั ะพะฟัะฑะปะธะบะพะฒะฐัั ะฒ {ะฟะปะฐััะพัะผะฐ}: {ะบะฐะฝะฐะป}.
 ะขะพะบะตะฝั ะฒะพะทะฒัะฐัะตะฝั: {amount}

 [ะะพะฒัะพัะธัั]             โ PRIMARY โ ัะฐ ะถะต ะฟะปะฐััะพัะผะฐ
 [ะััะณะพะต ะฟะพะดะบะปััะตะฝะธะต]    โ ัะฐะณ 2 Social Pipeline
 [ะกะพััะฐะฝะธัั ะบะฐะบ ัะตัะฝะพะฒะธะบ] โ ะฟะพัั ัะพััะฐะฝัะฝ ะฒ pipeline checkpoint
 [ะะปะฐะฒะฝะพะต ะผะตะฝั]"
```

callback_data: `pipeline:social:retry`, `pipeline:social:change_conn`, `pipeline:social:draft`, `nav:dashboard`

---

## 9. AI-ะธะทะพะฑัะฐะถะตะฝะธั

### 9.1. ะะพะณะธะบะฐ ะฒัะฑะพัะฐ

```
ะัะธะพัะธัะตั:
1. AI-ะณะตะฝะตัะฐัะธั (Gemini ัะตัะตะท OpenRouter) โ ะดะตัะพะปั
2. ะะตะท ะธะทะพะฑัะฐะถะตะฝะธะน โ ะตัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฒัะฑัะฐะป 0
```

ะะฐะณััะทะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปััะบะธั ัะพัะพ ัะฑัะฐะฝะฐ ะธะท v2. ะขะพะปัะบะพ AI-ะธะทะพะฑัะฐะถะตะฝะธั.

### 9.2. ะ pipeline (ัะฐะณ 4d)

```
"ะ ััะฐััะต ะฑัะดะตั 4 AI-ะธะทะพะฑัะฐะถะตะฝะธั ะฟะพ ัะตะผะต.

 [AI ะณะตะฝะตัะฐัะธั (120 ัะพะบะตะฝะพะฒ)]    โ ะดะตัะพะปั
 [ะะฐัััะพะธัั ะบะพะปะธัะตััะฒะพ]          โ ะฒัะฑะพั 0-10
 [ะะฐะทะฐะด ะบ ัะตะบะปะธััั]"
```

### 9.3. ะกัะพะธะผะพััั

- AI-ะธะทะพะฑัะฐะถะตะฝะธะต: 30 ัะพะบะตะฝะพะฒ/ัั
- ะะตัะพะปั: 4 ะธะทะพะฑัะฐะถะตะฝะธั = 120 ัะพะบะตะฝะพะฒ
- ะะฐัััะพะนะบะธ ััะธะปะตะน (ะบะฐะผะตัั, ัะฐะบัััั, ะฝะตะณะฐัะธะฒะฝัะต ะฟัะพะผะฟัั) โ ะฒ toolbox (ะบะฐััะพัะบะฐ ะบะฐัะตะณะพัะธะธ โ ยซะะฐัััะพะนะบะธ ะบะพะฝัะตะฝัะฐยป)

---

## 10. ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### 10.1. ะะพะฒัะต ัะฐะนะปั

```
routers/publishing/pipeline/
  __init__.py           โ ัะตะณะธัััะฐัะธั ัะพััะตัะพะฒ
  article.py            โ ArticlePipelineFSM (23 ัะพััะพัะฝะธั)
  social.py             โ SocialPipelineFSM (27 ัะพััะพัะฝะธะน)
  readiness.py          โ inline readiness check handlers

services/
  readiness.py          โ ReadinessService

keyboards/
  pipeline.py           โ ะบะปะฐะฒะธะฐัััั ะดะปั pipeline
```

### 10.2. ReadinessService

```python
@dataclass
class ReadinessReport:
    has_keywords: bool
    keyword_count: int
    has_description: bool
    has_prices: bool
    image_count: int
    estimated_cost: int          # tokens
    user_balance: int
    is_sufficient_balance: bool

    @property
    def all_filled(self) -> bool:
        """If all filled โ readiness check is skipped."""
        return self.has_keywords and self.has_description

    @property
    def missing_items(self) -> list[str]:
        """Only unfilled items to show in pipeline."""
        ...
```

### 10.3. Pipeline checkpoint (ะพัะดะตะปัะฝัะน Redis-ะบะปัั)

Redis key: `pipeline:{user_id}:state`, TTL 24h.

ะฅัะฐะฝะธััั **ะพัะดะตะปัะฝะพ ะพั FSM state.data** โ sub-flow ะฝะต ะผะพะถะตั ะฟะตัะตะทะฐะฟะธัะฐัั pipeline ะดะฐะฝะฝัะต.

```json
{
    "pipeline_type": "article",
    "current_step": "readiness",
    "project_id": 5,
    "connection_id": 12,
    "category_id": 8,
    "skipped_keywords": false,
    "skipped_description": true,
    "skipped_prices": true,
    "photo_source": "ai",
    "image_count": 4,
    "estimated_cost": 320
}
```

### 10.4. Sub-flow ะผะตัะฐะฝะธะทะผ (inline handlers)

Pipeline **ะฝะต ะฒัะทัะฒะฐะตั** ัััะตััะฒัััะธะต FSM. ะะผะตััะพ ััะพะณะพ inline handlers ะฟะตัะตะธัะฟะพะปัะทััั Service Layer:

- KeywordGeneration: 3 ะฒะพะฟัะพัะฐ โ `KeywordService.generate()` (~30-50 ัััะพะบ)
- ConnectWP: 3 ะฒะพะฟัะพัะฐ โ `ConnectionService.create()` (~30-50 ัััะพะบ)
- CategoryCreate: 1 ะฒะพะฟัะพั โ `CategoryRepository.create()` (~15 ัััะพะบ)
- Description: 1 ะฟะพะดัะฒะตัะถะดะตะฝะธะต โ `AIOrchestrator.generate("description")` (~20 ัััะพะบ)

### 10.5. ะะฑะฝะพะฒะปะตะฝะธะต ัะตะบะปะธััะฐ ะฟะพัะปะต sub-flow

**ะัะพัััะต sub-flows** (1 ัะพะพะฑัะตะฝะธะต โ 1 ะพัะฒะตั): `editMessageText` ัะตะบะปะธััะฐ.

**ะกะปะพะถะฝัะต sub-flows** (3+ ะฟัะพะผะตะถััะพัะฝัั ัะพะพะฑัะตะฝะธะน): `deleteMessage` ััะฐัะพะณะพ ัะตะบะปะธััะฐ + ะฝะพะฒะพะต ัะพะพะฑัะตะฝะธะต ะฒะฝะธะทั ัะฐัะฐ.

### 10.6. ะะฐะปะธะดะฐัะธั WP ะฝะฐ ัะฐะณะต ะฒัะฑะพัะฐ

ะัะธ ะฐะฒัะพะฒัะฑะพัะต WP-ะฟะพะดะบะปััะตะฝะธั (ัะฐะณ 2, 1 ะฟะพะดะบะปััะตะฝะธะต) โ HEAD-ะทะฐะฟัะพั (~1 ัะตะบ). ะัะปะธ ะฝะตะดะพัััะฟะตะฝ โ ััะฐะทั ะพัะธะฑะบะฐ (ยง8.2).

### 10.7. Pipeline checkpoint vs FSM timeout

Pipeline checkpoint (TTL 24h) **ะฟะพะปะฝะพัััั ะฝะตะทะฐะฒะธัะธะผ ะพั FSM inactivity timeout** (30 ะผะธะฝ). ะะฐะถะต ะตัะปะธ FSM ัะฑัะพัะธะปัั โ checkpoint ะถะธะฒ.

---

## 11. UX-ัะตัะตะฝะธั

### 11.1. Pipeline ะทะฐะผะตะฝัะตั Quick Publish

Pipeline **ะฟะพะปะฝะพัััั ะทะฐะผะตะฝัะตั** Quick Publish. Quick Publish ัะดะฐะปัะฝ.

### 11.2. Pipeline = ะพะฝะฑะพัะดะธะฝะณ

ะัะดะตะปัะฝัะน onboarding wizard ะฝะต ะฝัะถะตะฝ. ะัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต pipeline ะฟัะพะฒะพะดะธั ัะตัะตะท ัะพะทะดะฐะฝะธะต ะฟัะพะตะบัะฐ โ WP โ ะบะฐัะตะณะพัะธั โ ะบะปััะตะฒะธะบะธ โ ะฟัะฑะปะธะบะฐัะธั.

### 11.3. ะะฐะฒะธะณะฐัะธะพะฝะฝัะต ะทะฐะณะพะปะพะฒะบะธ

ะะฐะถะดะพะต ัะพะพะฑัะตะฝะธะต pipeline ะฝะฐัะธะฝะฐะตััั ั ะบะพะผะฟะฐะบัะฝะพะณะพ ะทะฐะณะพะปะพะฒะบะฐ ะฒ ัะพัะผะฐัะต `(N/5)`:

```
"ะกัะฐััั (1/5) โ ะัะพะตะบั"          โ ะฒัะฑะพั ะฟัะพะตะบัะฐ
"ะกัะฐััั (2/5) โ ะกะฐะนั"            โ ะฟัะพะฒะตัะบะฐ/ะฟะพะดะบะปััะตะฝะธะต WP
"ะกัะฐััั (3/5) โ ะขะตะผะฐ"            โ ะฒัะฑะพั ะบะฐัะตะณะพัะธะธ
"ะกัะฐััั (4/5) โ ะะพะดะณะพัะพะฒะบะฐ"      โ readiness ัะตะบะปะธัั
"ะกัะฐััั (5/5) โ ะะพะดัะฒะตัะถะดะตะฝะธะต"   โ ัะธะฝะฐะปัะฝะพะต ะฟะพะดัะฒะตัะถะดะตะฝะธะต
"ะกัะฐััั โ ะะตะฝะตัะฐัะธั..."          โ ะฟัะพัะตัั (ะฑะตะท ะฝะพะผะตัะฐ)
"ะกัะฐััั โ ะัะตะฒัั"                โ ะฟัะตะดะฟัะพัะผะพัั (ะฑะตะท ะฝะพะผะตัะฐ)
```

### 11.4. ะฃะฟัะพัะตะฝะธะต ะบะปััะตะฒะธะบะพะฒ ะดะปั ะฝะพะฒะธัะบะฐ

```
"ะะพะดะฑะตััะผ SEO-ััะฐะทั ะดะปั ะปัััะตะณะพ ัะฐะฝะถะธัะพะฒะฐะฝะธั?

 [ะะพะดะพะฑัะฐัั ะฐะฒัะพะผะฐัะธัะตัะบะธ (100 ััะฐะท โ 100 ัะพะบะตะฝะพะฒ)]
 [ะะฐัััะพะธัั ะฟะฐัะฐะผะตััั]
 [ะัะพะฟัััะธัั]"
```

`[ะะพะดะพะฑัะฐัั ะฐะฒัะพะผะฐัะธัะตัะบะธ]` ะธัะฟะพะปัะทัะตั `company_name` + `specialization`. 1 ะฝะฐะถะฐัะธะต ะฒะผะตััะพ 3 ัะฐะณะพะฒ.

### 11.5. Post-publish ะฟะพะดัะบะฐะทะบะธ

ะะตะฝะฐะฒัะทัะธะฒัะต ะฟะพะดัะบะฐะทะบะธ ะฟะพัะปะต ะฟัะฑะปะธะบะฐัะธะธ, ะฟะพะบะฐะทัะฒะฐัััั ะพะดะธะฝ ัะฐะท:

| ะะพัะปะต | ะะพะดัะบะฐะทะบะฐ |
|-------|-----------|
| 1-ะน ะฟัะฑะปะธะบะฐัะธะธ | ยซะะพะฑะฐะฒััะต ะพะฟะธัะฐะฝะธะต ะบะพะผะฟะฐะฝะธะธ โ ััะฐััะธ ะฑัะดัั ัะพัะฝะตะตยป |
| 3-ะน ะฟัะฑะปะธะบะฐัะธะธ (ะฝะตั ัะตะฝ) | ยซะะพะฑะฐะฒััะต ะฟัะฐะนั-ะปะธัั โ ะฒ ััะฐัััั ะฟะพัะฒัััั ัะตะฐะปัะฝัะต ัะตะฝัยป |
| 5-ะน ะฟัะฑะปะธะบะฐัะธะธ (ะฝะตั ัะฐัะฟะธัะฐะฝะธั) | ยซะะฐัััะพะนัะต ะฐะฒัะพะฟัะฑะปะธะบะฐัะธั โ ะฑะพั ะฑัะดะตั ัะฐะฑะพัะฐัั ะฟะพะบะฐ ะฒั ะพัะดััะฐะตัะตยป |

### 11.6. ะะฒัะพะณะตะฝะตัะฐัะธั ะพะฟะธัะฐะฝะธั ะฟัะธ ะฟัะพะฟััะบะต

ะัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฟัะพะฟัััะธะป ะพะฟะธัะฐะฝะธะต, AI ะธัะฟะพะปัะทัะตั ะดะพัััะฟะฝัะน ะบะพะฝัะตะบัั:
`company_name` + `specialization` + `website_url`.

### 11.7. >8 ะฟัะพะตะบัะพะฒ (power user)

```
"ะะปั ะบะฐะบะพะณะพ ะฟัะพะตะบัะฐ?"

[ะะตะฑะตะปั ะะพะผัะพัั]  โ ะฟะพัะปะตะดะฝะธะน ะธัะฟะพะปัะทะพะฒะฐะฝะฝัะน
[ะกัะพะผะฐัะพะปะพะณะธั]    โ ะฟัะตะดะฟะพัะปะตะดะฝะธะน
โโโโโโโโโโโโโโโโโโ
[ะะฒัะพัะตัะฒะธั]  [ะะตััะบะธะน ัะฐะด]  ...
[ะัั โผ]
```

ะะพัะปะตะดะฝะธะน ะธัะฟะพะปัะทะพะฒะฐะฝะฝัะน โ ะฟะตัะฒัะผ ะฒ ัะฟะธัะบะต.

### 11.8. GOD_MODE ะฒ pipeline

ะะปั `ADMIN_ID`:
- ะขะพะบะตะฝั **ะฝะต ัะฟะธััะฒะฐัััั**
- ะกัะพะธะผะพััั ะพัะพะฑัะฐะถะฐะตััั: `"ะกัะพะธะผะพััั: ~320 ัะพะบ. (GOD_MODE โ ะฑะตัะฟะปะฐัะฝะพ)"`

### 11.9. Pipeline analytics (Phase D)

ะขะฐะฑะปะธัะฐ `pipeline_events(user_id, pipeline_id, event, step, metadata, created_at)` ะดะปั ััะตะบะธะฝะณะฐ ะฒะพัะพะฝะบะธ.

### 11.10. Demo-ััะฐััั (Phase D)

ะะฝะพะฟะบะฐ `[ะะพัะผะพััะตัั ะฟัะธะผะตั ััะฐััะธ]` ะฝะฐ Dashboard ะดะปั ะฝะพะฒะธัะบะพะฒ โ Telegraph-ะฟัะตะฒัั, 0 ัะพะบะตะฝะพะฒ. ะััะตะทะฐะตั ะฟะพัะปะต ะฟะตัะฒะพะน ะฟัะฑะปะธะบะฐัะธะธ.

### 11.11. Batch mode (Phase D)

ะะฐะบะตัะฝะฐั ะณะตะฝะตัะฐัะธั โ ะฒัะฑะพั ะฝะตัะบะพะปัะบะธั ะบะฐัะตะณะพัะธะน โ ะณะตะฝะตัะฐัะธั N ััะฐัะตะน.

---

## 12. ButtonStyle ะบะฐััะฐ โ Pipeline

### 12.1. ะกััะฐัะตะณะธั

| ะกัะธะปั | ะฆะฒะตั | ะกะตะผะฐะฝัะธะบะฐ | ะะฐะบั. ะฝะฐ ัะบัะฐะฝ |
|-------|------|-----------|----------------|
| `PRIMARY` | ะกะธะฝะธะน | ะะปะฐะฒะฝัะน CTA, ัะพัะบะฐ ะฒัะพะดะฐ | 1 |
| `SUCCESS` | ะะตะปัะฝัะน | ะะพะดัะฒะตัะถะดะตะฝะธะต, ะฝะตะพะฑัะฐัะธะผะพะต ะดะตะนััะฒะธะต | 1 |
| `DANGER` | ะัะฐัะฝัะน | ะะพัะตัั ะดะฐะฝะฝัั/ัะพะบะตะฝะพะฒ/ะฟัะพะณัะตััะฐ | 1 |
| *(ะฑะตะท ััะธะปั)* | ะะตัะพะปั | ะะฐะฒะธะณะฐัะธั, ะฒัะฑะพั, enrichers | ะะตะท ะพะณัะฐะฝะธัะตะฝะธะน |

### 12.2. ะะฐััะฐ ะฟะพ ัะบัะฐะฝะฐะผ

#### Dashboard (ยง2)

| ะะฝะพะฟะบะฐ | Style | ะะพัะตะผั |
|--------|-------|--------|
| `[ะะฐะฟะธัะฐัั ััะฐััั ะฝะฐ ัะฐะนั]` | `PRIMARY` | ะะปะฐะฒะฝะฐั ัะพัะบะฐ ะฒัะพะดะฐ |
| `[ะกะพะทะดะฐัั ะฟะพัั ะฒ ัะพััะตัะธ]` | โ | ะัะพัะธัะฝัะน CTA |
| `[ะะพะธ ะฟัะพะตะบัั]` `[ะัะพัะธะปั]` `[ะขะพะบะตะฝั]` | โ | ะะฐะฒะธะณะฐัะธั |

#### Article Pipeline โ ะจะฐะณ 2: WordPress

| ะะฝะพะฟะบะฐ | Style |
|--------|-------|
| `[ะะพะดะบะปััะธัั WordPress]` | `PRIMARY` |
| `[ะขะพะปัะบะพ ะฟัะตะฒัั]` | โ |

#### Article Pipeline โ ะจะฐะณ 4: Readiness

| ะะฝะพะฟะบะฐ | Style |
|--------|-------|
| `[ะะพะดะพะฑัะฐัั ะบะปััะตะฒะธะบะธ]` `[ะะฟะธัะฐะฝะธะต]` `[ะฆะตะฝั]` | โ |
| **`[ะัั ะะ โ ะณะตะฝะตัะธัะพะฒะฐัั โ]`** | `SUCCESS` |
| `[ะกะพััะฐะฝะธัั]` (ะฒ sub-flow) | `SUCCESS` |
| `[ะะตัะตะณะตะฝะตัะธัะพะฒะฐัั]` (ะฒ sub-flow) | โ |

#### Article Pipeline โ ะจะฐะณ 5: ะะพะดัะฒะตัะถะดะตะฝะธะต

| ะะฝะพะฟะบะฐ | Style |
|--------|-------|
| **`[ะกะพะทะดะฐัั ััะฐััั]`** | `SUCCESS` |
| `[ะะตัะฝััััั ะบ ัะตะบะปะธััั]` | โ |
| `[ะัะผะตะฝะฐ]` | โ |

#### Article Pipeline โ ะจะฐะณ 7: ะัะตะฒัั

| ะะฝะพะฟะบะฐ | Style |
|--------|-------|
| **`[ะะฟัะฑะปะธะบะพะฒะฐัั]`** | `SUCCESS` |
| `[ะะตัะตะณะตะฝะตัะธัะพะฒะฐัั]` | โ |
| `[ะัะผะตะฝะฐ โ ะฒะตัะฝััั ัะพะบะตะฝั]` | `DANGER` |

#### Article Pipeline โ ะจะฐะณ 8: ะะตะทัะปััะฐั

| ะะฝะพะฟะบะฐ | Style |
|--------|-------|
| `[ะัั ััะฐััั]` | `PRIMARY` |
| `[ะะฐัััะพะธัั ะฐะฒัะพะฟัะฑะปะธะบะฐัะธั]` `[ะะปะฐะฒะฝะพะต ะผะตะฝั]` | โ |

#### Social Pipeline โ ะจะฐะณ 2: ะะพะดะบะปััะตะฝะธะต

| ะะฝะพะฟะบะฐ | Style |
|--------|-------|
| ะะฝะพะฟะบะธ ะฟะพะดะบะปััะตะฝะธะน | โ |
| `[ะะพะดะบะปััะธัั Telegram/VK/Pinterest]` | โ |

#### Social Pipeline โ ะจะฐะณ 5-6: ะะพะดัะฒะตัะถะดะตะฝะธะต/ะะตะฒัั

| ะะฝะพะฟะบะฐ | Style |
|--------|-------|
| **`[ะกะพะทะดะฐัั ะฟะพัั]`** / **`[ะะฟัะฑะปะธะบะพะฒะฐัั]`** | `SUCCESS` |
| `[ะะตัะตะณะตะฝะตัะธัะพะฒะฐัั]` | โ |
| `[ะัะผะตะฝะฐ]` / `[ะัะผะตะฝะฐ โ ะฒะตัะฝััั ัะพะบะตะฝั]` | `DANGER` |

#### Social Pipeline โ ะจะฐะณ 7: ะะตะทัะปััะฐั

| ะะฝะพะฟะบะฐ | Style |
|--------|-------|
| `[ะะดะฐะฟัะธัะพะฒะฐัั ะดะปั VK/Pinterest]` | โ |
| `[ะัั ะฟะพัั]` | `PRIMARY` |

#### ะัะธะฑะบะธ (ยง8)

| ะญะบัะฐะฝ | ะะฝะพะฟะบะฐ | Style |
|-------|--------|-------|
| ะะตัะฒะฐัะบะฐ ัะพะบะตะฝะพะฒ | `[ะะพะฟะพะปะฝะธัั ะฑะฐะปะฐะฝั]` | `PRIMARY` |
| ะะพะทะฒัะฐั ะฟะพัะปะต ะพะฟะปะฐัั | `[ะัะพะดะพะปะถะธัั]` | `SUCCESS` |
| WP ะฝะตะดะพัััะฟะตะฝ | `[ะะพะฒัะพัะธัั ะฟะพะฟััะบั]` | `PRIMARY` |
| ะะตะฝะตัะฐัะธั fail | `[ะะพะฒัะพัะธัั]` | `PRIMARY` |

#### ะะฐัะธัะฐ ะพั ะฒััะพะดะฐ (ยง8.5)

| ะะฝะพะฟะบะฐ | Style |
|--------|-------|
| **`[ะัะพะดะพะปะถะธัั pipeline]`** | `PRIMARY` |
| `[ะัะนัะธ ะฒ ะผะตะฝั]` | `DANGER` |

#### ะัะตะดะปะพะถะตะฝะธะต ัะฐัะฟะธัะฐะฝะธั (ยง7.1)

| ะะฝะพะฟะบะฐ | Style |
|--------|-------|
| `[ะะฐะถะดัะน ะฑัะดะฝะธะน ะดะตะฝั]` / `[ะะฝ, ะกั, ะั]` | โ |
| `[ะะฐัััะพะธัั ะฒัััะฝัั]` `[ะะพะทะถะต]` | โ |

> **ะัะธะผะตัะฐะฝะธะต:** ะัะตัะตัั ัะฐัะฟะธัะฐะฝะธั โ ะพะฑัะฐัะธะผัะต (ะผะพะถะฝะพ ัะดะฐะปะธัั), ะฟะพััะพะผั ะฑะตะท ััะธะปั.
> SUCCESS ะฟัะธะผะตะฝัะตััั ัะพะปัะบะพ ะบ ะบะฝะพะฟะบะต [ะะพัะพะฒะพ] ะฟะพัะปะต ัััะฝะพะน ะฝะฐัััะพะนะบะธ (ะฝะตะพะฑัะฐัะธะผะพะต ัะพะทะดะฐะฝะธะต cron).

#### ะะพะทะพะฑะฝะพะฒะปะตะฝะธะต pipeline (ยง2.6)

| ะะฝะพะฟะบะฐ | Style |
|--------|-------|
| **`[ะัะพะดะพะปะถะธัั]`** | `SUCCESS` |
| `[ะะฐัะฐัั ะทะฐะฝะพะฒะพ]` | โ |
| `[ะัะผะตะฝะธัั]` | `DANGER` |

#### ะัะพัั-ะฟะพััะธะฝะณ ัะตะฒัั (ยง6.2)

| ะะฝะพะฟะบะฐ | Style |
|--------|-------|
| **`[ะะฟัะฑะปะธะบะพะฒะฐัั ะฒ VK]`** | `SUCCESS` |
| `[ะัะผะตะฝะฐ]` | โ |

#### ะัะตััะฒะฐะฝะธะต pipeline (ยง8.7)

| ะะฝะพะฟะบะฐ | Style |
|--------|-------|
| `[ะัะตัะฒะฐัั ะธ ะฝะฐัะฐัั ะฝะพะฒัะน]` | `DANGER` |
| **`[ะะตัะฝััััั ะบ ัะตะบััะตะผั]`** | `PRIMARY` |

### 12.3. ะกะฒะพะดะฝะฐั ััะฐัะธััะธะบะฐ

```
SUCCESS (ะทะตะปัะฝัะน): ~20 ะบะฝะพะฟะพะบ โ "ะดะตะฝัะณะธ โ ัะตะทัะปััะฐั" ะธะปะธ "ะฟัะพะฑะปะตะผะฐ โ ัะตัะตะฝะธะต"
PRIMARY (ัะธะฝะธะน):    ~8 ะบะฝะพะฟะพะบ โ ัะพัะบะธ ะฒัะพะดะฐ ะธ "ะฑะตะทะพะฟะฐัะฝัะน ะฒัะฑะพั"
DANGER  (ะบัะฐัะฝัะน):  ~6 ะบะฝะพะฟะพะบ โ ะฟะพัะตัั ะบะพะฝัะตะฝัะฐ / ะฟัะพะณัะตััะฐ / ัะพะบะตะฝะพะฒ
ะะตะท ััะธะปั:        ~60 ะบะฝะพะฟะพะบ โ ะฝะฐะฒะธะณะฐัะธั, ะฒัะฑะพั, enrichers
```

### 12.4. ะัะฐะฒะธะปะฐ ะดะปั ัะฐะทัะฐะฑะพััะธะบะฐ

1. **ะะฐะบัะธะผัะผ 1 `PRIMARY` ะฝะฐ ัะบัะฐะฝะต.** ะัะปะธ ะตััั `SUCCESS` โ `PRIMARY` ะฝะต ะฝัะถะตะฝ
2. **`SUCCESS` ัะพะปัะบะพ ะดะปั ะฝะตะพะฑัะฐัะธะผัั ะดะตะนััะฒะธะน:** ัะฟะธัะฐะฝะธะต, ะฟัะฑะปะธะบะฐัะธั, ัะพััะฐะฝะตะฝะธะต
3. **`DANGER` ัะพะปัะบะพ ะฟัะธ ะฟะพัะตัะต:** ะบะพะฝัะตะฝัะฐ, ะฟัะพะณัะตััะฐ, ัะพะบะตะฝะพะฒ
4. **Enrichers ะฒัะตะณะดะฐ ะฑะตะท ััะธะปั:** ะบะปััะตะฒะธะบะธ, ะพะฟะธัะฐะฝะธะต, ัะตะฝั
5. **`icon_custom_emoji_id`:** ะฝะต ะธัะฟะพะปัะทัะตะผ ะฒ v2

---

## 13. ะะฐะฒะธะณะฐัะธะพะฝะฝะฐั ะบะฐััะฐ โ Pipeline

```
/start (Dashboard)
 โ
 Reply-KB: [ะะตะฝั] [ะะฐะฟะธัะฐัั ััะฐััั] [ะกะพะทะดะฐัั ะฟะพัั] [ะะะะะะะ]*
 โ
 Inline-KB:
 โโโ[ะะฐะฟะธัะฐัั ััะฐััั (PRIMARY)]
 โ   โโโ[ะัะพะตะบั] (0โัะพะทะดะฐัั, 1โะฐะฒัะพ, >1โัะฟะธัะพะบ)
 โ   โโโ[WordPress] (0โะฟะพะดะบะปััะธัั/ะฟัะตะฒัั, 1โะฐะฒัะพ, >1โัะฟะธัะพะบ)
 โ   โโโ[ะะฐัะตะณะพัะธั] (0โัะพะทะดะฐัั, 1โะฐะฒัะพ, >1โัะฟะธัะพะบ)
 โ   โโโ[Readiness ัะตะบะปะธัั]
 โ   โ   โโโ ะะปััะตะฒะธะบะธ (ะฐะฒัะพ/ะฝะฐัััะพะธัั/ะทะฐะณััะทะธัั)
 โ   โ   โโโ ะะฟะธัะฐะฝะธะต (AI/ะฒัััะฝัั)
 โ   โ   โโโ ะฆะตะฝั (ัะตะบัั/Excel)
 โ   โ   โโโ ะะทะพะฑัะฐะถะตะฝะธั (AI/ะบะพะปะธัะตััะฒะพ)
 โ   โโโ[ะะพะดัะฒะตัะถะดะตะฝะธะต]
 โ   โโโ[ะะตะฝะตัะฐัะธั] (ะฟัะพะณัะตัั-ัะพะพะฑัะตะฝะธั)
 โ   โโโ[ะัะตะฒัั] (Telegraph) โ [ะะฟัะฑะปะธะบะพะฒะฐัั] / [ะะตัะตะณะตะฝะตัะธัะพะฒะฐัั] / [ะัะผะตะฝะฐ]
 โ   โโโ[ะะตะทัะปััะฐั] โ [ะัั ััะฐััั] / [ะะฒัะพะฟัะฑะปะธะบะฐัะธั] / [ะะตะฝั]
 โ
 โโโ[ะกะพะทะดะฐัั ะฟะพัั ะฒ ัะพััะตัะธ]
 โ   โโโ[ะัะพะตะบั]
 โ   โโโ[ะะพะดะบะปััะตะฝะธะต] (ะบะพะฝะบัะตัะฝัะต ะบะฐะฝะฐะปั/ะณััะฟะฟั)
 โ   โโโ[ะะฐัะตะณะพัะธั]
 โ   โโโ[Readiness] (ัะพะบัะฐััะฝะฝัะน: ะบะปััะตะฒะธะบะธ + ะพะฟะธัะฐะฝะธะต)
 โ   โโโ[ะะพะดัะฒะตัะถะดะตะฝะธะต]
 โ   โโโ[ะะตะฒัั] (ัะตะบัั ะฟะพััะฐ ะฒ ัะฐัะต) โ [ะะฟัะฑะปะธะบะพะฒะฐัั] / [ะะตัะตะณะตะฝะตัะธัะพะฒะฐัั] / [ะัะผะตะฝะฐ]
 โ   โโโ[ะะตะทัะปััะฐั] โ [ะัะพัั-ะฟะพัั VK/Pinterest] / [ะัั ะฟะพัั] / [ะะตะฝั]
 โ       โโโ ะัะพัั-ะฟะพัั โ [ะะตะฒัั ะฐะดะฐะฟัะฐัะธะธ] โ [ะะฟัะฑะปะธะบะพะฒะฐัั] / [ะัะผะตะฝะฐ]
 โ
 โโโ[ะะพะธ ะฟัะพะตะบัั] โ UX_TOOLBOX.md
 โโโ[ะัะพัะธะปั] โ UX_TOOLBOX.md ยง14
 โโโ[ะขะพะบะตะฝั] โ UX_TOOLBOX.md ยง15
```
