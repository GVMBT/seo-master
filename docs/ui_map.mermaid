stateDiagram-v2

    state Broadcast {
        Broadcast_text: text
        Broadcast_confirm: confirm
        [*] --> Broadcast_text
        Broadcast_text --> Broadcast_confirm
        Broadcast_text --> [*]
        Broadcast_confirm --> [*]
    }

    state CompetitorAnalysis {
        CompetitorAnalysis_url: url
        CompetitorAnalysis_confirm: confirm
        CompetitorAnalysis_analyzing: analyzing
        CompetitorAnalysis_results: results
        [*] --> CompetitorAnalysis_url
        CompetitorAnalysis_url --> CompetitorAnalysis_confirm
        CompetitorAnalysis_confirm --> CompetitorAnalysis_analyzing
        CompetitorAnalysis_confirm --> [*]
        CompetitorAnalysis_results --> [*]
    }

    state DescriptionGenerate {
        DescriptionGenerate_confirm: confirm
        DescriptionGenerate_review: review
        [*] --> DescriptionGenerate_confirm
        DescriptionGenerate_confirm --> DescriptionGenerate_review
        DescriptionGenerate_confirm --> [*]
        DescriptionGenerate_review --> [*]
    }

    state KeywordGeneration {
        KeywordGeneration_products: products
        KeywordGeneration_geography: geography
        KeywordGeneration_quantity: quantity
        KeywordGeneration_confirm: confirm
        KeywordGeneration_fetching: fetching
        KeywordGeneration_clustering: clustering
        KeywordGeneration_enriching: enriching
        KeywordGeneration_results: results
        [*] --> KeywordGeneration_products
        KeywordGeneration_products --> KeywordGeneration_geography
        KeywordGeneration_geography --> KeywordGeneration_quantity
        KeywordGeneration_quantity --> KeywordGeneration_confirm
        KeywordGeneration_confirm --> KeywordGeneration_results
        KeywordGeneration_confirm --> KeywordGeneration_fetching
        KeywordGeneration_confirm --> KeywordGeneration_clustering
        KeywordGeneration_confirm --> KeywordGeneration_enriching
        KeywordGeneration_results --> [*]
    }

    state KeywordUpload {
        KeywordUpload_file_upload: file_upload
        KeywordUpload_enriching: enriching
        KeywordUpload_clustering: clustering
        KeywordUpload_results: results
        [*] --> KeywordUpload_file_upload
        KeywordUpload_file_upload --> KeywordUpload_results
        KeywordUpload_file_upload --> KeywordUpload_enriching
        KeywordUpload_file_upload --> KeywordUpload_clustering
        KeywordUpload_results --> [*]
    }

    state CategoryCreate {
        CategoryCreate_name: name
        [*] --> CategoryCreate_name
        CategoryCreate_name --> [*]
    }

    state PriceInput {
        PriceInput_choose_method: choose_method
        PriceInput_text_input: text_input
        PriceInput_file_upload: file_upload
        [*] --> PriceInput_choose_method
        PriceInput_text_input --> [*]
        PriceInput_file_upload --> [*]
    }

    state ReviewGeneration {
        ReviewGeneration_quantity: quantity
        ReviewGeneration_confirm_cost: confirm_cost
        ReviewGeneration_generating: generating
        ReviewGeneration_review: review
        [*] --> ReviewGeneration_quantity
        ReviewGeneration_quantity --> ReviewGeneration_confirm_cost
        ReviewGeneration_confirm_cost --> ReviewGeneration_generating
        ReviewGeneration_confirm_cost --> ReviewGeneration_review
        ReviewGeneration_confirm_cost --> [*]
        ReviewGeneration_review --> ReviewGeneration_generating
        ReviewGeneration_review --> ReviewGeneration_review
        ReviewGeneration_review --> [*]
    }

    state ConnectWordPress {
        ConnectWordPress_url: url
        ConnectWordPress_login: login
        ConnectWordPress_password: password
        [*] --> ConnectWordPress_url
        ConnectWordPress_url --> ConnectWordPress_login
        ConnectWordPress_login --> ConnectWordPress_password
        ConnectWordPress_password --> [*]
    }

    state ConnectTelegram {
        ConnectTelegram_channel: channel
        ConnectTelegram_token: token
        [*] --> ConnectTelegram_channel
        ConnectTelegram_channel --> ConnectTelegram_token
        ConnectTelegram_token --> [*]
    }

    state ConnectVK {
        ConnectVK_token: token
        ConnectVK_select_group: select_group
        [*] --> ConnectVK_token
        ConnectVK_token --> ConnectVK_select_group
        ConnectVK_token --> [*]
        ConnectVK_select_group --> [*]
    }

    state ConnectPinterest {
        ConnectPinterest_oauth_callback: oauth_callback
        ConnectPinterest_select_board: select_board
        [*] --> ConnectPinterest_oauth_callback
        ConnectPinterest_select_board --> [*]
    }

    state ProjectCreate {
        ProjectCreate_name: name
        ProjectCreate_company_name: company_name
        ProjectCreate_specialization: specialization
        ProjectCreate_website_url: website_url
        [*] --> ProjectCreate_name
        ProjectCreate_name --> ProjectCreate_company_name
        ProjectCreate_company_name --> ProjectCreate_specialization
        ProjectCreate_specialization --> ProjectCreate_website_url
        ProjectCreate_website_url --> [*]
    }

    state ProjectEdit {
        ProjectEdit_field_value: field_value
        [*] --> ProjectEdit_field_value
        ProjectEdit_field_value --> [*]
    }

    state ArticlePublish {
        ArticlePublish_confirm_cost: confirm_cost
        ArticlePublish_generating: generating
        ArticlePublish_preview: preview
        ArticlePublish_publishing: publishing
        ArticlePublish_regenerating: regenerating
        [*] --> ArticlePublish_confirm_cost
        ArticlePublish_confirm_cost --> ArticlePublish_generating
        ArticlePublish_confirm_cost --> ArticlePublish_preview
        ArticlePublish_confirm_cost --> [*]
        ArticlePublish_preview --> ArticlePublish_regenerating
        ArticlePublish_preview --> ArticlePublish_preview
        ArticlePublish_preview --> ArticlePublish_publishing
        ArticlePublish_preview --> [*]
        ArticlePublish_regenerating --> [*]
    }

    state ScheduleSetup {
        ScheduleSetup_select_days: select_days
        ScheduleSetup_select_count: select_count
        ScheduleSetup_select_times: select_times
        [*] --> ScheduleSetup_select_days
        ScheduleSetup_select_days --> ScheduleSetup_select_count
        ScheduleSetup_select_count --> ScheduleSetup_select_times
        ScheduleSetup_select_times --> [*]
    }

    state SocialPostPublish {
        SocialPostPublish_confirm_cost: confirm_cost
        SocialPostPublish_generating: generating
        SocialPostPublish_review: review
        SocialPostPublish_publishing: publishing
        SocialPostPublish_regenerating: regenerating
        [*] --> SocialPostPublish_confirm_cost
        SocialPostPublish_confirm_cost --> SocialPostPublish_generating
        SocialPostPublish_confirm_cost --> SocialPostPublish_review
        SocialPostPublish_confirm_cost --> [*]
        SocialPostPublish_review --> SocialPostPublish_regenerating
        SocialPostPublish_review --> SocialPostPublish_review
        SocialPostPublish_review --> SocialPostPublish_publishing
        SocialPostPublish_review --> [*]
        SocialPostPublish_regenerating --> [*]
    }

    %% Screen navigation

    state "Cb Kw Results Cancel" as cb_kw_results_cancel
    state "Cb Kw Upload Results Cancel" as cb_kw_upload_results_cancel
    state " Connection List" as _connection_list
    state " Connection Card" as _connection_card
    state " Connection Delete Confirm" as _connection_delete_cfm
    state "Fsm Vk Token" as fsm_vk_token
    state "Cb Article Cancel" as cb_article_cancel
    state "Cb Social Cancel" as cb_social_cancel
    state " Handle Pinterest Auth" as _handle_pinterest_auth
    state "Cb Pay Yookassa" as cb_pay_yookassa
    state "Cb Subscribe Stars" as cb_subscribe_stars
    state "Cb Subscribe Yookassa" as cb_subscribe_yookassa
    state "Description Confirm" as description_cfm
    state "Description Result" as description_result
    state "Description Existing" as description_existing
    state "Review Quantity" as review_quantity
    state "Review Confirm" as review_cfm
    state "Review Result" as review_result
    state "Review Existing" as review_existing
    state "Price Method" as price_method
    state "Price Result" as price_result
    state "Price Existing" as price_existing
    state "Media Menu" as media_menu
    state "Admin Dashboard" as admin_dashboard
    state "Admin Broadcast Audience" as admin_broadcast_audience
    state "Admin Broadcast Confirm" as admin_broadcast_cfm
    state "Help Main" as help_main
    state "Help Back" as help_back
    state "Dashboard" as dashboard
    state "Project List" as project_list
    state "Project Card" as project_card
    state "Project Edit Fields" as project_edit_fields
    state "Project Delete Confirm" as project_delete_cfm
    state "Category List" as category_list
    state "Category Card" as category_card
    state "Category Delete Confirm" as category_delete_cfm
    state "Settings Main" as settings_main
    state "Profile Main" as profile_main
    state "Profile History" as profile_history
    state "Profile Referral" as profile_referral
    state "Settings Notifications" as settings_notifications
    state "Tariffs Main" as tariffs_main
    state "Package List" as package_list
    state "Package Pay" as package_pay
    state "Subscription Pay" as subscription_pay
    state "Subscription Manage" as subscription_manage
    state "Subscription Cancel Confirm" as subscription_cancel_cfm
    state "Paginate" as paginate
    state "Article Confirm" as article_cfm
    state "Article Preview" as article_preview
    state "Social Confirm" as social_cfm
    state "Social Review" as social_review
    state "Insufficient Balance" as insufficient_balance
    state "Quick Combo List" as quick_combo_list
    state "Quick Wp Choice" as quick_wp_choice
    state "Publish Platform Choice" as publish_platform_choice
    state "Keywords Main" as keywords_main
    state "Keyword Quantity" as keyword_quantity
    state "Keyword Confirm" as keyword_cfm
    state "Keyword Results" as keyword_results
    state "Audit Menu" as audit_menu
    state "Audit Results" as audit_results
    state "Competitor Confirm" as competitor_cfm
    state "Competitor Results" as competitor_results
    state "Scheduler Category List" as scheduler_category_list
    state "Scheduler Platform List" as scheduler_platform_list
    state "Schedule Days" as schedule_days
    state "Schedule Count" as schedule_count
    state "Schedule Times" as schedule_times
    state "Schedule Summary" as schedule_summary

    _connection_list --> project_card: К проекту
    _connection_list --> _connection_card: text
    _connection_card --> _connection_delete_cfm: Удалить
    _connection_card --> _connection_list: К подключениям
    _connection_delete_cfm --> _connection_list: Да, удалить
    fsm_vk_token --> _connection_list: text
    cb_social_cancel --> category_card: К категории
    _handle_pinterest_auth --> _connection_list: text
    cb_pay_yookassa --> package_pay: Назад
    cb_subscribe_stars --> subscription_pay: Назад
    cb_subscribe_yookassa --> subscription_pay: Назад
    description_cfm --> category_card: Отмена
    description_result --> category_card: Отмена
    description_existing --> category_card: К категории
    review_quantity --> category_card: Отмена
    review_cfm --> category_card: Отмена
    review_result --> category_card: Отмена
    review_existing --> review_quantity: Перегенерировать ({cou...
    review_existing --> category_card: К категории
    price_method --> category_card: К категории
    price_result --> category_card: К категории
    price_existing --> price_method: Обновить
    price_existing --> category_card: К категории
    media_menu --> category_card: К категории
    admin_dashboard --> admin_broadcast_audience: Сообщения всем
    admin_dashboard --> dashboard: Назад
    admin_broadcast_audience --> admin_dashboard: Отмена
    admin_broadcast_cfm --> admin_dashboard: Отмена
    help_main --> dashboard: Главное меню
    help_back --> help_main: Назад к помощи
    help_back --> dashboard: Главное меню
    dashboard --> project_list: Проекты
    dashboard --> profile_main: Профиль
    dashboard --> tariffs_main: Тарифы
    dashboard --> settings_main: Настройки
    dashboard --> help_main: Помощь
    project_list --> dashboard: Главное меню
    project_list --> help_main: Помощь
    project_card --> project_edit_fields: Редактировать данные
    project_card --> category_list: Управление категориями
    project_card --> _connection_list: Подключения платформ
    project_card --> scheduler_category_list: Планировщик публикаций
    project_card --> audit_menu: Анализ сайта
    project_card --> project_delete_cfm: Удалить проект
    project_card --> project_list: К списку проектов
    project_edit_fields --> project_card: Назад
    project_delete_cfm --> project_list: Да, удалить
    project_delete_cfm --> project_card: Отмена
    category_list --> project_card: К проекту
    category_card --> publish_platform_choice: Опубликовать
    category_card --> keywords_main: Ключевые фразы
    category_card --> description_existing: Описание
    category_card --> price_existing: Цены
    category_card --> review_existing: Отзывы
    category_card --> media_menu: Медиа
    category_card --> category_delete_cfm: Удалить категорию
    category_card --> category_list: К списку категорий
    category_delete_cfm --> category_list: Да, удалить
    category_delete_cfm --> category_card: Отмена
    settings_main --> dashboard: Главное меню
    profile_main --> profile_history: История расходов
    profile_main --> tariffs_main: Пополнить
    profile_main --> profile_referral: Реферальная программа
    profile_main --> dashboard: Главное меню
    profile_history --> profile_main: К профилю
    profile_referral --> profile_main: К профилю
    settings_notifications --> settings_main: Назад
    tariffs_main --> package_list: Пополнить баланс
    tariffs_main --> dashboard: Главное меню
    tariffs_main --> subscription_pay: label
    package_list --> tariffs_main: Назад
    package_list --> package_pay: label
    package_pay --> package_list: Назад
    subscription_pay --> tariffs_main: Назад
    subscription_manage --> tariffs_main: Изменить тариф
    article_cfm --> category_card: Отмена
    social_cfm --> category_card: Отмена
    insufficient_balance --> package_list: Пополнить
    insufficient_balance --> dashboard: Отмена
    quick_combo_list --> dashboard: Назад
    quick_wp_choice --> dashboard: Назад
    quick_wp_choice --> quick_combo_list: conn.identifier
    publish_platform_choice --> category_card: Назад
    keywords_main --> category_card: К категории
    keyword_cfm --> category_card: Отмена
    keyword_results --> category_card: К категории
    audit_menu --> audit_results: label
    audit_menu --> competitor_cfm: Анализ конкурентов
    audit_menu --> project_card: К проекту
    audit_results --> competitor_cfm: Анализ конкурентов
    audit_results --> project_card: К проекту
    competitor_cfm --> project_card: Отмена
    competitor_results --> project_card: К проекту
    scheduler_category_list --> project_card: К проекту
    scheduler_category_list --> scheduler_platform_list: name
    scheduler_platform_list --> scheduler_category_list: К планировщику
    schedule_summary --> scheduler_category_list: К планировщику

    %% FSM entry points
    admin_broadcast_audience --> Broadcast: Start Broadcast
    audit_menu --> CompetitorAnalysis: Start CompetitorAnalysis
    category_card --> DescriptionGenerate: Start DescriptionGenerate
    description_existing --> DescriptionGenerate: Start DescriptionGenerate
    keywords_main --> KeywordGeneration: Start KeywordGeneration
    keywords_main --> KeywordUpload: Start KeywordUpload
    project_card --> CategoryCreate: Start CategoryCreate
    category_card --> ReviewGeneration: Start ReviewGeneration
    review_existing --> ReviewGeneration: Start ReviewGeneration
    _connection_list --> ConnectWordPress: Start ConnectWordPress
    _connection_list --> ConnectTelegram: Start ConnectTelegram
    _connection_list --> ConnectVK: Start ConnectVK
    _connection_list --> ConnectPinterest: Start ConnectPinterest
    project_list --> ProjectCreate: Start ProjectCreate
    project_edit_fields --> ProjectEdit: Start ProjectEdit
    scheduler_platform_list --> ScheduleSetup: Start ScheduleSetup